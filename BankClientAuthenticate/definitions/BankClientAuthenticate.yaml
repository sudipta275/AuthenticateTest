swagger: '2.0'
info:
  version: 1.0.0
  title: BankClientAuthenticate
  x-ibm-name: bankclientauthenticate
  description: Establishes a user session
host: $(catalog.host)
basePath: /bank
paths:
  /client/securityanswers:
    post:
      responses:
        '200':
          description: 200 OK
          schema:
            $ref: '#/definitions/RegisterSecurityQuestions_Output'
      operationId: RegisterSecurityQuestions
      parameters:
        - $ref: '#/parameters/MLI-Application'
        - $ref: '#/parameters/MLI-OriginatingIP'
        - $ref: '#/parameters/MLI-ApplicationVersion'
        - $ref: '#/parameters/MLI-DeviceID'
        - $ref: '#/parameters/MLI-DeviceType'
        - $ref: '#/parameters/MLI-Carrier'
        - $ref: '#/parameters/MLI-GeoLocationLat'
        - $ref: '#/parameters/MLI-GeoLocationLong'
        - $ref: '#/parameters/Accept-Language'
        - $ref: '#/parameters/MLI-SessionToken'
        - $ref: '#/parameters/MLI-TransactionToken'
        - $ref: '#/parameters/Authorization'
        - $ref: '#/parameters/Accept'
        - name: input
          required: false
          in: body
          schema:
            $ref: '#/definitions/RegisterSecurityQuestions_Input'
  /client/securityquestions:
    get:
      responses:
        '200':
          description: 200 OK
      operationId: GetSecurityQuestions
      parameters:
        - $ref: '#/parameters/MLI-Application'
        - $ref: '#/parameters/MLI-OriginatingIP'
        - $ref: '#/parameters/MLI-ApplicationVersion'
        - $ref: '#/parameters/MLI-DeviceID'
        - $ref: '#/parameters/MLI-DeviceType'
        - $ref: '#/parameters/MLI-Carrier'
        - $ref: '#/parameters/MLI-GeoLocationLat'
        - $ref: '#/parameters/MLI-GeoLocationLong'
        - $ref: '#/parameters/Accept-Language'
        - $ref: '#/parameters/MLI-SessionToken'
        - $ref: '#/parameters/MLI-TransactionToken'
        - $ref: '#/parameters/Authorization'
        - $ref: '#/parameters/Accept'
  /client/authenticate:
    post:
      responses:
        '200':
          description: 200 OK
          schema:
            $ref: '#/definitions/Authenticate_Output'
      operationId: banklogin
      parameters:
        - $ref: '#/parameters/QueryResponseAuthorization'
        - $ref: '#/parameters/Accept-Language'
        - $ref: '#/parameters/MLI-Application'
        - $ref: '#/parameters/MLI-OriginatingIP'
        - $ref: '#/parameters/MLI-ApplicationVersion'
        - $ref: '#/parameters/MLI-DeviceID'
        - $ref: '#/parameters/MLI-DeviceType'
        - $ref: '#/parameters/MLI-Carrier'
        - $ref: '#/parameters/MLI-GeoLocationLat'
        - $ref: '#/parameters/MLI-GeoLocationLong'
        - $ref: '#/parameters/MLI-SessionToken'
        - $ref: '#/parameters/MLI-TransactionToken'
        - name: Authenticate_Input
          required: false
          in: body
          schema:
            $ref: '#/definitions/Authenticate_Input'
        - $ref: '#/parameters/Accept'
      description: Establishes a session.
  /client/ResetPassword:
    post:
      responses:
        '200':
          description: 200 OK
          schema:
            $ref: '#/definitions/ResetPassword_Output'
      parameters:
        - $ref: '#/parameters/MLI-Application'
        - $ref: '#/parameters/MLI-OriginatingIP'
        - $ref: '#/parameters/MLI-ApplicationVersion'
        - $ref: '#/parameters/MLI-DeviceID'
        - $ref: '#/parameters/MLI-DeviceType'
        - $ref: '#/parameters/MLI-Carrier'
        - $ref: '#/parameters/MLI-GeoLocationLat'
        - $ref: '#/parameters/MLI-GeoLocationLong'
        - $ref: '#/parameters/Accept-Language'
        - $ref: '#/parameters/MLI-SessionToken'
        - $ref: '#/parameters/MLI-TransactionToken'
        - name: ResetPasswordInput
          required: false
          in: body
          schema:
            $ref: '#/definitions/ResetPassword_Input'
        - $ref: '#/parameters/ForgotPasswordToken'
        - $ref: '#/parameters/Accept'
      operationId: ResetPassword
  /client/ValidateVerificationQuestions:
    post:
      responses:
        '200':
          description: 200 OK
          schema:
            $ref: '#/definitions/ValidateVerificationQsnOutput'
      operationId: ValidateVerificationQuestions
      parameters:
        - $ref: '#/parameters/MLI-Application'
        - $ref: '#/parameters/MLI-OriginatingIP'
        - $ref: '#/parameters/MLI-ApplicationVersion'
        - $ref: '#/parameters/MLI-DeviceID'
        - $ref: '#/parameters/MLI-DeviceType'
        - $ref: '#/parameters/MLI-Carrier'
        - $ref: '#/parameters/MLI-GeoLocationLat'
        - $ref: '#/parameters/MLI-GeoLocationLong'
        - $ref: '#/parameters/Accept-Language'
        - $ref: '#/parameters/MLI-SessionToken'
        - $ref: '#/parameters/MLI-TransactionToken'
        - name: ForgotPasswordToken
          type: string
          required: false
          in: header
        - name: InputBody
          required: false
          in: body
          schema:
            $ref: '#/definitions/ValidateVerificationQuestionsBody'
        - $ref: '#/parameters/Accept'
  /client/PasswordResetQuestions:
    post:
      responses:
        '200':
          description: 200 OK
      operationId: GetPasswordResetQuestions
      parameters:
        - $ref: '#/parameters/MLI-Application'
        - $ref: '#/parameters/MLI-OriginatingIP'
        - $ref: '#/parameters/MLI-ApplicationVersion'
        - $ref: '#/parameters/MLI-DeviceID'
        - $ref: '#/parameters/MLI-DeviceType'
        - $ref: '#/parameters/MLI-Carrier'
        - $ref: '#/parameters/MLI-GeoLocationLat'
        - $ref: '#/parameters/MLI-GeoLocationLong'
        - $ref: '#/parameters/Accept-Language'
        - $ref: '#/parameters/MLI-SessionToken'
        - $ref: '#/parameters/MLI-TransactionToken'
        - name: InputBody
          required: true
          in: body
          schema:
            $ref: '#/definitions/GetPasswordResetQuestionsBody'
        - $ref: '#/parameters/Accept'
  /client/changepassword:
    post:
      responses:
        '200':
          description: 200 OK
          schema:
            $ref: '#/definitions/ChangePassword_Output'
      operationId: ChangePassword
      parameters:
        - $ref: '#/parameters/MLI-Application'
        - $ref: '#/parameters/MLI-OriginatingIP'
        - $ref: '#/parameters/MLI-ApplicationVersion'
        - $ref: '#/parameters/MLI-DeviceID'
        - $ref: '#/parameters/MLI-DeviceType'
        - $ref: '#/parameters/MLI-Carrier'
        - $ref: '#/parameters/MLI-GeoLocationLat'
        - $ref: '#/parameters/MLI-GeoLocationLong'
        - $ref: '#/parameters/Accept-Language'
        - $ref: '#/parameters/MLI-SessionToken'
        - $ref: '#/parameters/MLI-TransactionToken'
        - name: ChangePasswordInput
          required: false
          in: body
          schema:
            $ref: '#/definitions/ChangePassword_Input'
        - $ref: '#/parameters/Authorization'
        - $ref: '#/parameters/Accept'
securityDefinitions:
  X-IBM-Client-Secret:
    type: apiKey
    description: ''
    in: header
    name: X-IBM-Client-Secret
  X-IBM-Client-Id:
    description: ''
    in: header
    name: X-IBM-Client-Id
    type: apiKey
security:
  - {}
x-ibm-configuration:
  assembly:
    execute:
      - activity-log:
          title: activity-log
          content: activity
          error-content: payload
      - gatewayscript:
          title: debug-input
          source: |-
            var obj = 'request.headers.mli-application';
            console.error( '1 ' + obj + ' = ' + apim.getvariable(obj) );
            console.log( '1 ' + obj + ' = ' + apim.getvariable(obj) );
      - operation-switch:
          title: operation-switch
          case:
            - operations:
                - banklogin
              execute:
                - validate:
                    title: validate
                    definition: request
                - gatewayscript:
                    title: remove-jwt-header
                    source: >-
                      var authNode =
                      apim.getvariable('request.headers.queryresponseauthorization');


                      if (authNode!= null){
                          apim.setvariable('input-jwt', authNode.replace(/^Bearer /g, ''));
                      }
            - operations:
                - ChangePassword
                - RegisterSecurityQuestions
                - GetSecurityQuestions
              execute:
                - gatewayscript:
                    title: remove-jwt-header
                    source: >-
                      var authNode =
                      apim.getvariable('request.headers.authorization');


                      if (authNode!= null){
                          apim.setvariable('input-jwt', authNode.replace(/^Bearer /g, ''));
                      }
            - operations:
                - ResetPassword
              execute:
                - gatewayscript:
                    title: remove-jwt-header
                    source: >-
                      var authNode =
                      apim.getvariable('request.headers.forgotpasswordtoken');


                      if (authNode!= null){
                          apim.setvariable('input-jwt', authNode.replace(/^Bearer /g, ''));
                      }
            - operations:
                - ValidateVerificationQuestions
              execute:
                - gatewayscript:
                    title: remove-jwt-header
                    source: >-
                      var authNode =
                      apim.getvariable('request.headers.forgotpasswordtoken');


                      if (authNode!= null){
                          apim.setvariable('input-jwt', authNode.replace(/^Bearer /g, ''));
                      }
          otherwise: []
      - set-variable:
          title: set-variable
          actions:
            - value: >-
                <wsse:UsernameToken
                wsu:Id="UsernameToken-F5DCB71D45A5D255951467748984641184"
                xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd"><wsse:Username>mbcbsmobile</wsse:Username><wsse:Password
                Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">LvG46LePtsLeveF</wsse:Password></wsse:UsernameToken>
              add: varAppAuthSecurity
            - value: $(authenticateEndPoint)
              add: varSOAPEndpoint
            - value: tls-bank-dev
              add: varTLSProfile
            - value: $(request.body.CardNumber)
              add: varCardNumber
            - value: false
              add: varIsOutputAsXML
            - value: >-
                {"alg": "HS512",  "kty": "oct", "use": "sig" , "k":
                "7rxtcu0IGmjGfvoJ2wiT52J2R-iyYlXrRU5fEArM1XkeJ2ZeikR6LRJx01ijAFJG2e7F2JBt-Swqy8nlHup5Xg",
                "kid": "hs512-key"}
              add: hs512-key
            - value: >-
                {"alg": "HS512",   "kty": "oct",   "use": "enc",   "k":
                "YCPzF7WzPSl9Y4I-UJs_Muh4gKgPn3RQSi5g35ZjM_CkrQXLTVt0LKlJ9bEZz_AyrJyjznCKMuOx_fXjwRmswA",  
                "kid": "hs512-enc-key"}
              add: hs512-enc-key
            - value: CUSTMEED
              add: varSourceSystemID
      - if:
          title: if
          condition: $(input-jwt).length > 8
          execute:
            - jwt-validate:
                title: jwt-validate
                jwt: input-jwt
                output-claims: decoded-claims
                jws-jwk: hs512-key
                jwe-jwk: hs512-enc-key
            - gatewayscript:
                title: extract-bank-token
                source: |
                  console.error('Application is local');
                  var obj = apim.getvariable('decoded-claims');
                  var authToken = JSON.parse(obj).bankAuthorizationToken;
                  apim.setvariable('authorizationToken', authToken, 'add');
          description: $(input-jwt).length > 8
      - operation-switch:
          title: operation-switch
          case:
            - operations:
                - banklogin
              execute:
                - map:
                    title: authinput-soapreq
                    inputs:
                      varAppAuthSecurity:
                        schema:
                          type: string
                          title: varAppAuthSecurity
                        variable: varAppAuthSecurity
                      mli-application:
                        schema:
                          type: string
                          title: mli-application
                        variable: request.headers.mli-application
                      mli-originatingip:
                        schema:
                          type: string
                          title: mli-originatingip
                        variable: request.headers.mli-originatingip
                      mli-applicationversion:
                        schema:
                          type: string
                          title: mli-applicationversion
                        variable: request.headers.mli-applicationversion
                      mli-deviceid:
                        schema:
                          type: string
                          title: mli-deviceid
                        variable: request.headers.mli-deviceid
                      mli-devicetype:
                        schema:
                          type: string
                          title: mli-devicetype
                        variable: request.headers.mli-devicetype
                      mli-carrier:
                        schema:
                          type: string
                          title: mli-carrier
                        variable: request.headers.mli-carrier
                      mli-geolocationlat:
                        schema:
                          type: double
                          title: mli-geolocationlat
                        variable: request.headers.mli-geolocationlat
                      mli-geolocationlong:
                        schema:
                          type: double
                          title: mli-geolocationlong
                        variable: request.headers.mli-geolocationlong
                      accept-language:
                        schema:
                          type: string
                          title: accept-language
                        variable: request.headers.accept-language
                      varSourceSystemID:
                        schema:
                          type: string
                        variable: varSourceSystemID
                      AuthenticateInput:
                        schema:
                          $ref: '#/definitions/Authenticate_Input'
                        variable: request.body
                        content: application/json
                      bankSessionToken:
                        schema:
                          type: string
                        variable: authorizationToken
                      mli-transactiontoken:
                        schema:
                          type: string
                        variable: request.headers.mli-transactiontoken
                      mli-sessiontoken:
                        schema:
                          type: string
                        variable: request.headers.mli-sessiontoken
                    outputs:
                      authenticateInput:
                        schema:
                          $ref: >-
                            #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/AuthenticateInput
                        variable: message.body
                        content: application/xml
                      content-type:
                        schema:
                          type: string
                          title: content-type
                        variable: message.headers.content-type
                      SOAPAction:
                        schema:
                          type: string
                        variable: message.headers.SOAPAction
                    actions:
                      - set: content-type
                        default: text/xml
                      - set: SOAPAction
                        default: 'http://www.manulifebank.com/auth/ws/2.1/Authenticate'
                      - set: >-
                          authenticateInput.Envelope.Header.Security.UsernameToken.Username
                        default: mbcbsmobile
                      - set: >-
                          authenticateInput.Envelope.Header.Security.UsernameToken.Password
                        default: LvG46LePtsLeveF
                      - set: >-
                          authenticateInput.Envelope.Body.Authenticate.CommonParms.SourceSystemID
                        from: varSourceSystemID
                      - set: >-
                          authenticateInput.Envelope.Body.Authenticate.CommonParms.Application
                        from: mli-application
                      - set: >-
                          authenticateInput.Envelope.Body.Authenticate.CommonParms.Language
                        from: accept-language
                      - set: >-
                          authenticateInput.Envelope.Body.Authenticate.CommonParms.OriginatingIP
                        from: mli-originatingip
                      - set: >-
                          authenticateInput.Envelope.Body.Authenticate.CommonParms.DeviceID
                        from: mli-deviceid
                      - set: >-
                          authenticateInput.Envelope.Body.Authenticate.CommonParms.DeviceType
                        from: mli-devicetype
                      - set: >-
                          authenticateInput.Envelope.Body.Authenticate.CommonParms.Carrier
                        from: mli-carrier
                      - set: >-
                          authenticateInput.Envelope.Body.Authenticate.CommonParms.GeoLocation.Latitude
                        from: mli-geolocationlat
                      - set: >-
                          authenticateInput.Envelope.Body.Authenticate.CommonParms.GeoLocation.Longitude
                        from: mli-geolocationlong
                      - set: >-
                          authenticateInput.Envelope.Body.Authenticate.CardNumber
                        from: AuthenticateInput.Credentials.Username
                      - set: authenticateInput.Envelope.Body.Authenticate.Password
                        from: AuthenticateInput.Credentials.Password
                      - set: >-
                          authenticateInput.Envelope.Body.Authenticate.Answer.QuestionID
                        from: AuthenticateInput.PVQ.AnswerID
                      - set: >-
                          authenticateInput.Envelope.Body.Authenticate.Answer.Answer
                        from: AuthenticateInput.PVQ.AnswerText
                      - set: >-
                          authenticateInput.Envelope.Body.Authenticate.AnswerPrevAttempts
                        default: '0'
                      - set: >-
                          authenticateInput.Envelope.Body.Authenticate.AuthenticationSessionToken
                        from: bankSessionToken
                      - set: >-
                          authenticateInput.Envelope.Body.Authenticate.CommonParms.SessionToken
                        from: mli-sessiontoken
                      - set: >-
                          authenticateInput.Envelope.Body.Authenticate.CommonParms.ApplicationVersion
                        from: mli-applicationversion
                      - set: >-
                          authenticateInput.Envelope.Body.Authenticate.CommonParms.TransactionToken
                        from: mli-transactiontoken
                      - set: output.Envelope.Header.Security.UsernameToken.Username
                        default: mbcbsmobile
                      - set: output.Envelope.Header.Security.UsernameToken.Password
                        default: LvG46LePtsLeveF
            - operations:
                - ChangePassword
              execute:
                - map:
                    title: ChangePasswordInput
                    inputs:
                      MLI-SourceSystemID:
                        schema:
                          type: string
                          title: MLI-SourceSystemID
                        variable: varSourceSystemID
                      MLI-Application:
                        schema:
                          type: string
                          title: MLI-Application
                        variable: request.headers.mli-application
                      Accept-Language:
                        schema:
                          type: string
                          title: Accept-Language
                        variable: request.headers.accept-language
                      MLI-OriginatingIP:
                        schema:
                          type: string
                          title: MLI-OriginatingIP
                        variable: request.headers.mli-originatingip
                      MLI-ApplicationVersion:
                        schema:
                          type: string
                          title: MLI-ApplicationVersion
                        variable: request.headers.mli-applicationversion
                      MLI-DeviceID:
                        schema:
                          type: string
                          title: MLI-DeviceID
                        variable: request.headers.mli-deviceid
                      MLI-DeviceType:
                        schema:
                          type: string
                          title: MLI-DeviceType
                        variable: request.headers.mli-devicetype
                      MLI-Carrier:
                        schema:
                          type: string
                          title: MLI-Carrier
                        variable: request.headers.mli-carrier
                      MLI-GeoLocationLat:
                        schema:
                          type: string
                          title: MLI-GeoLocationLat
                        variable: request.headers.mli-geolocationlat
                      MLI-GeoLocationLong:
                        schema:
                          type: string
                          title: MLI-GeoLocationLong
                        variable: request.headers.mli-geolocationlong
                      MLI-SessionLogID:
                        schema:
                          type: string
                          title: MLI-SessionLogID
                        variable: request.headers.mli-sessionlogid
                      MLI-TransactionLogID:
                        schema:
                          type: string
                          title: MLI-TransactionLogID
                        variable: request.headers.mli-transactionlogid
                      authorizationToken:
                        schema:
                          type: string
                          title: authorizationToken
                        variable: authorizationToken
                      ChangePasswordInput:
                        schema:
                          $ref: '#/definitions/ChangePassword_Input'
                        variable: request.body
                        content: application/json
                    outputs:
                      output:
                        schema:
                          $ref: >-
                            #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/ChangePasswordInput
                        variable: message.body
                        content: application/xml
                      content-type:
                        schema:
                          type: string
                          title: content-type
                        variable: message.headers.content-type
                      SOAPAction:
                        schema:
                          type: string
                          title: SOAPAction
                        variable: message.headers.SOAPAction
                    actions:
                      - set: output.Envelope.Header.Security.UsernameToken.Username
                        default: $(username)
                      - set: output.Envelope.Header.Security.UsernameToken.Password
                        default: $(password)
                      - set: content-type
                        default: text/xml
                      - set: SOAPAction
                        default: 'http://www.manulifebank.com/auth/ws/2.1/ChangePassword'
                      - set: >-
                          output.Envelope.Body.ChangePassword.CommonParms.SourceSystemID
                        from: MLI-SourceSystemID
                      - set: >-
                          output.Envelope.Body.ChangePassword.CommonParms.Application
                        from: MLI-Application
                      - set: >-
                          output.Envelope.Body.ChangePassword.CommonParms.Language
                        from: Accept-Language
                      - set: >-
                          output.Envelope.Body.ChangePassword.CommonParms.OriginatingIP
                        from: MLI-OriginatingIP
                      - set: >-
                          output.Envelope.Body.ChangePassword.CommonParms.ApplicationVersion
                        from: MLI-ApplicationVersion
                      - set: >-
                          output.Envelope.Body.ChangePassword.CommonParms.DeviceID
                        from: MLI-DeviceID
                      - set: >-
                          output.Envelope.Body.ChangePassword.CommonParms.DeviceType
                        from: MLI-DeviceType
                      - set: >-
                          output.Envelope.Body.ChangePassword.CommonParms.Carrier
                        from: MLI-Carrier
                      - set: >-
                          output.Envelope.Body.ChangePassword.CommonParms.SessionToken
                        from: MLI-SessionLogID
                      - set: >-
                          output.Envelope.Body.ChangePassword.CommonParms.TransactionToken
                        from: MLI-TransactionLogID
                      - set: >-
                          output.Envelope.Body.ChangePassword.CommonParms.GeoLocation.Latitude
                        from: MLI-GeoLocationLat
                      - set: >-
                          output.Envelope.Body.ChangePassword.CommonParms.GeoLocation.Longitude
                        from: MLI-GeoLocationLong
                      - set: output.Envelope.Body.ChangePassword.Password
                        from: ChangePasswordInput.Password
                      - set: output.Envelope.Body.ChangePassword.NewPassword
                        from: ChangePasswordInput.NewPassword
                      - set: >-
                          output.Envelope.Header.AuthenticationHeader.AuthenticationToken
                        from: authorizationToken
            - operations:
                - ResetPassword
              execute:
                - map:
                    title: resertpassword
                    inputs:
                      MLI-SourceSystemID:
                        schema:
                          type: string
                          title: MLI-SourceSystemID
                        variable: varSourceSystemID
                      MLI-Application:
                        schema:
                          type: string
                          title: MLI-Application
                        variable: request.headers.mli-application
                      Accept-Language:
                        schema:
                          type: string
                          title: Accept-Language
                        variable: request.headers.accept-language
                      MLI-OriginatingIP:
                        schema:
                          type: string
                          title: MLI-OriginatingIP
                        variable: request.headers.mli-originatingip
                      MLI-ApplicationVersion:
                        schema:
                          type: string
                          title: MLI-ApplicationVersion
                        variable: request.headers.mli-applicationversion
                      MLI-DeviceID:
                        schema:
                          type: string
                          title: MLI-DeviceID
                        variable: request.headers.mli-deviceid
                      MLI-DeviceType:
                        schema:
                          type: string
                          title: MLI-DeviceType
                        variable: request.headers.mli-devicetype
                      MLI-Carrier:
                        schema:
                          type: string
                          title: MLI-Carrier
                        variable: request.headers.mli-carrier
                      MLI-GeoLocationLat:
                        schema:
                          type: string
                          title: MLI-GeoLocationLat
                        variable: request.headers.mli-geolocationlat
                      MLI-GeoLocationLong:
                        schema:
                          type: string
                          title: MLI-GeoLocationLong
                        variable: request.headers.mli-geolocationlong
                      MLI-SessionLogID:
                        schema:
                          type: string
                          title: MLI-SessionLogID
                        variable: request.headers.mli-sessiontoken
                      MLI-TransactionLogID:
                        schema:
                          type: string
                          title: MLI-TransactionLogID
                        variable: request.headers.mli-transactiontoken
                      ResetPassword:
                        schema:
                          $ref: '#/definitions/ResetPassword_Input'
                        variable: request.body
                        content: application/json
                      forgotpasswordtoken:
                        schema:
                          type: string
                          title: forgotpasswordtoken
                        variable: authorizationToken
                    outputs:
                      output:
                        schema:
                          $ref: >-
                            #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/ResetPasswordInput
                        variable: message.body
                        content: application/xml
                      content-type:
                        schema:
                          type: string
                          title: content-type
                        variable: message.headers.content-type
                      SOAPAction:
                        schema:
                          type: string
                          title: SOAPAction
                        variable: message.headers.SOAPAction
                    actions:
                      - set: content-type
                        default: text/xml
                      - set: SOAPAction
                        default: 'http://www.manulifebank.com/auth/ws/2.1/ResetPassword'
                      - set: >-
                          output.Envelope.Body.ResetPassword.CommonParms.SourceSystemID
                        from: MLI-SourceSystemID
                      - set: >-
                          output.Envelope.Body.ResetPassword.CommonParms.Application
                        from: MLI-Application
                      - set: >-
                          output.Envelope.Body.ResetPassword.CommonParms.Language
                        from: Accept-Language
                      - set: >-
                          output.Envelope.Body.ResetPassword.CommonParms.OriginatingIP
                        from: MLI-OriginatingIP
                      - set: >-
                          output.Envelope.Body.ResetPassword.CommonParms.ApplicationVersion
                        from: MLI-ApplicationVersion
                      - set: >-
                          output.Envelope.Body.ResetPassword.CommonParms.DeviceID
                        from: MLI-DeviceID
                      - set: >-
                          output.Envelope.Body.ResetPassword.CommonParms.DeviceType
                        from: MLI-DeviceType
                      - set: output.Envelope.Body.ResetPassword.CommonParms.Carrier
                        from: MLI-Carrier
                      - set: >-
                          output.Envelope.Body.ResetPassword.CommonParms.GeoLocation.Latitude
                        from: MLI-GeoLocationLat
                      - set: >-
                          output.Envelope.Body.ResetPassword.CommonParms.GeoLocation.Longitude
                        from: MLI-GeoLocationLong
                      - set: >-
                          output.Envelope.Body.ResetPassword.CommonParms.SessionToken
                        from: MLI-SessionLogID
                      - set: >-
                          output.Envelope.Body.ResetPassword.CommonParms.TransactionToken
                        from: MLI-TransactionLogID
                      - set: output.Envelope.Body.ResetPassword.CardNumber
                        from: ResetPassword.CardNumber
                      - set: output.Envelope.Body.ResetPassword.NewPassword
                        from: ResetPassword.NewPassword
                      - set: output.Envelope.Header.Security.UsernameToken.Username
                        default: $(username)
                      - set: output.Envelope.Header.Security.UsernameToken.Password
                        default: $(password)
                      - set: output.Envelope.Body.ResetPassword.ForgotPasswordToken
                        from: forgotpasswordtoken
            - operations:
                - GetPasswordResetQuestions
              execute:
                - map:
                    title: getqsn
                    inputs:
                      MLI-SourceSystemID:
                        schema:
                          type: string
                          title: MLI-SourceSystemID
                        variable: varSourceSystemID
                      MLI-Application:
                        schema:
                          type: string
                          title: MLI-Application
                        variable: request.headers.mli-application
                      MLI-OriginatingIP:
                        schema:
                          type: string
                          title: MLI-OriginatingIP
                        variable: request.headers.mli-originatingip
                      MLI-ApplicationVersion:
                        schema:
                          type: string
                          title: MLI-ApplicationVersion
                        variable: request.headers.mli-applicationversion
                      MLI-DeviceID:
                        schema:
                          type: string
                          title: MLI-DeviceID
                        variable: request.headers.mli-deviceid
                      MLI-DeviceType:
                        schema:
                          type: string
                          title: MLI-DeviceType
                        variable: request.headers.mli-devicetype
                      MLI-Carrier:
                        schema:
                          type: string
                          title: MLI-Carrier
                        variable: request.headers.mli-carrier
                      MLI-GeoLocationLat:
                        schema:
                          type: double
                          title: MLI-GeoLocationLat
                        variable: request.headers.mli-geolocationlat
                      MLI-GeoLocationLong:
                        schema:
                          type: double
                          title: MLI-GeoLocationLong
                        variable: request.headers.mli-geolocationlong
                      Accept-Language:
                        schema:
                          type: string
                          title: Accept-Language
                        variable: request.headers.accept-language
                      MLI-SessionLogID:
                        schema:
                          type: string
                          title: MLI-SessionLogID
                        variable: request.headers.mli-sessiontoken
                      MLI-TransactionLogID:
                        schema:
                          type: string
                          title: MLI-TransactionLogID
                        variable: request.headers.mli-transactiontoken
                      InputBody:
                        schema:
                          $ref: '#/definitions/GetPasswordResetQuestionsBody'
                        variable: request.body
                        content: application/json
                    outputs:
                      output:
                        schema:
                          $ref: >-
                            #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/GetPasswordResetQuestionsInput
                        variable: message.body
                        content: application/xml
                      content-type:
                        schema:
                          type: string
                          title: content-type
                        variable: message.headers.content-type
                      SOAPAction:
                        schema:
                          type: string
                          title: SOAPAction
                        variable: message.headers.SOAPAction
                    actions:
                      - set: output.Envelope.Header.Security.UsernameToken.Username
                        default: $(username)
                      - set: output.Envelope.Header.Security.UsernameToken.Password
                        default: $(password)
                      - set: >-
                          output.Envelope.Body.GetPasswordResetQuestions.CommonParms.SourceSystemID
                        from: MLI-SourceSystemID
                      - set: >-
                          output.Envelope.Body.GetPasswordResetQuestions.CommonParms.Application
                        from: MLI-Application
                      - set: >-
                          output.Envelope.Body.GetPasswordResetQuestions.CommonParms.OriginatingIP
                        from: MLI-OriginatingIP
                      - set: >-
                          output.Envelope.Body.GetPasswordResetQuestions.CommonParms.Language
                        from: Accept-Language
                      - set: >-
                          output.Envelope.Body.GetPasswordResetQuestions.CommonParms.ApplicationVersion
                        from: MLI-ApplicationVersion
                      - set: >-
                          output.Envelope.Body.GetPasswordResetQuestions.CommonParms.DeviceID
                        from: MLI-DeviceID
                      - set: >-
                          output.Envelope.Body.GetPasswordResetQuestions.CommonParms.DeviceType
                        from: MLI-DeviceType
                      - set: >-
                          output.Envelope.Body.GetPasswordResetQuestions.CommonParms.Carrier
                        from: MLI-Carrier
                      - set: >-
                          output.Envelope.Body.GetPasswordResetQuestions.CommonParms.GeoLocation.Latitude
                        from: MLI-GeoLocationLat
                      - set: >-
                          output.Envelope.Body.GetPasswordResetQuestions.CommonParms.GeoLocation.Longitude
                        from: MLI-GeoLocationLong
                      - set: >-
                          output.Envelope.Body.GetPasswordResetQuestions.CommonParms.SessionToken
                        from: MLI-SessionLogID
                      - set: >-
                          output.Envelope.Body.GetPasswordResetQuestions.CommonParms.TransactionToken
                        from: MLI-TransactionLogID
                      - set: >-
                          output.Envelope.Body.GetPasswordResetQuestions.CardNumber
                        from: InputBody.CardNumber
                      - set: >-
                          output.Envelope.Body.GetPasswordResetQuestions.SINSuffix
                        from: InputBody.SINSuffix
                      - set: >-
                          output.Envelope.Body.GetPasswordResetQuestions.DateOfBirth
                        from: InputBody.DateOfBirth
                      - set: content-type
                        default: text/xml
                      - set: SOAPAction
                        default: >-
                          http://www.manulifebank.com/auth/ws/2.1/GetResetPasswordQuestions
            - operations:
                - ValidateVerificationQuestions
              execute:
                - map:
                    title: validateqsn
                    inputs:
                      MLI-SourceSystemID:
                        schema:
                          type: string
                          title: MLI-SourceSystemID
                        variable: varSourceSystemID
                      MLI-Application:
                        schema:
                          type: string
                          title: MLI-Application
                        variable: request.headers.mli-application
                      MLI-OriginatingIP:
                        schema:
                          type: string
                          title: MLI-OriginatingIP
                        variable: request.headers.mli-originatingip
                      MLI-ApplicationVersion:
                        schema:
                          type: string
                          title: MLI-ApplicationVersion
                        variable: request.headers.mli-applicationversion
                      MLI-DeviceID:
                        schema:
                          type: string
                          title: MLI-DeviceID
                        variable: request.headers.mli-deviceid
                      MLI-DeviceType:
                        schema:
                          type: string
                          title: MLI-DeviceType
                        variable: request.headers.mli-devicetype
                      MLI-Carrier:
                        schema:
                          type: string
                          title: MLI-Carrier
                        variable: request.headers.mli-carrier
                      MLI-GeoLocationLat:
                        schema:
                          type: double
                          title: MLI-GeoLocationLat
                        variable: request.headers.mli-geolocationlat
                      MLI-GeoLocationLong:
                        schema:
                          type: double
                          title: MLI-GeoLocationLong
                        variable: request.headers.mli-geolocationlong
                      Accept-Language:
                        schema:
                          type: string
                          title: Accept-Language
                        variable: request.headers.accept-language
                      MLI-SessionLogID:
                        schema:
                          type: string
                          title: MLI-SessionLogID
                        variable: request.headers.mli-sessiontoken
                      MLI-TransactionLogID:
                        schema:
                          type: string
                          title: MLI-TransactionLogID
                        variable: request.headers.mli-transactiontoken
                      ForgotPasswordToken:
                        schema:
                          type: string
                          title: ForgotPasswordToken
                        variable: authorizationToken
                      InputBody:
                        schema:
                          $ref: '#/definitions/ValidateVerificationQuestionsBody'
                        variable: request.body
                        content: application/json
                    outputs:
                      output:
                        schema:
                          $ref: >-
                            #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/ValidateVerificationQuestionsInput
                        variable: message.body
                        content: application/xml
                      content-type:
                        schema:
                          type: string
                          title: content-type
                        variable: message.headers.content-type
                      SOAPAction:
                        schema:
                          type: string
                          title: SOAPAction
                        variable: message.headers.SOAPAction
                    actions:
                      - set: output.Envelope.Header.Security.UsernameToken.Username
                        default: $(username)
                      - set: output.Envelope.Header.Security.UsernameToken.Password
                        default: $(password)
                      - set: >-
                          output.Envelope.Body.ValidateVerificationQuestions.CommonParms.SourceSystemID
                        from: MLI-SourceSystemID
                      - set: >-
                          output.Envelope.Body.ValidateVerificationQuestions.CommonParms.Application
                        from: MLI-Application
                      - set: >-
                          output.Envelope.Body.ValidateVerificationQuestions.CommonParms.OriginatingIP
                        from: MLI-OriginatingIP
                      - set: >-
                          output.Envelope.Body.ValidateVerificationQuestions.CommonParms.ApplicationVersion
                        from: MLI-ApplicationVersion
                      - set: >-
                          output.Envelope.Body.ValidateVerificationQuestions.CommonParms.DeviceID
                        from: MLI-DeviceID
                      - set: >-
                          output.Envelope.Body.ValidateVerificationQuestions.CommonParms.DeviceType
                        from: MLI-DeviceType
                      - set: >-
                          output.Envelope.Body.ValidateVerificationQuestions.CommonParms.Carrier
                        from: MLI-Carrier
                      - set: >-
                          output.Envelope.Body.ValidateVerificationQuestions.CommonParms.GeoLocation.Latitude
                        from: MLI-GeoLocationLat
                      - set: >-
                          output.Envelope.Body.ValidateVerificationQuestions.CommonParms.GeoLocation.Longitude
                        from: MLI-GeoLocationLong
                      - set: >-
                          output.Envelope.Body.ValidateVerificationQuestions.CommonParms.Language
                        from: Accept-Language
                      - set: >-
                          output.Envelope.Body.ValidateVerificationQuestions.CommonParms.SessionToken
                        from: MLI-SessionLogID
                      - set: >-
                          output.Envelope.Body.ValidateVerificationQuestions.CommonParms.TransactionToken
                        from: MLI-TransactionLogID
                      - set: >-
                          output.Envelope.Body.ValidateVerificationQuestions.ForgotPasswordToken
                        from: ForgotPasswordToken
                      - set: >-
                          output.Envelope.Body.ValidateVerificationQuestions.CardNumber
                        from: InputBody.CardNumber
                      - create: >-
                          output.Envelope.Body.ValidateVerificationQuestions.Answers.Answer
                        from: InputBody.Answers.Answer
                        foreach: InputBody.Answers.Answer
                        actions:
                          - set: QuestionID
                            from: QuestionID
                          - set: Answer
                            from: Answer
                      - set: content-type
                        default: text/xml
                      - set: SOAPAction
                        default: >-
                          http://www.manulifebank.com/auth/ws/2.1/ValidateVerificationQuestions
            - operations:
                - GetSecurityQuestions
              execute:
                - map:
                    title: getsecurityqsn
                    inputs:
                      MLI-SourceSystemID:
                        schema:
                          type: string
                          title: MLI-SourceSystemID
                        variable: varSourceSystemID
                      MLI-Application:
                        schema:
                          type: string
                          title: MLI-Application
                        variable: request.headers.mli-application
                      Accept-Language:
                        schema:
                          type: string
                          title: Accept-Language
                        variable: request.headers.accept-language
                      MLI-OriginatingIP:
                        schema:
                          type: string
                          title: MLI-OriginatingIP
                        variable: request.headers.mli-originatingip
                      MLI-ApplicationVersion:
                        schema:
                          type: string
                          title: MLI-ApplicationVersion
                        variable: request.headers.mli-applicationversion
                      MLI-DeviceID:
                        schema:
                          type: string
                          title: MLI-DeviceID
                        variable: request.headers.mli-deviceid
                      MLI-DeviceType:
                        schema:
                          type: string
                          title: MLI-DeviceType
                        variable: request.headers.mli-devicetype
                      MLI-Carrier:
                        schema:
                          type: string
                          title: MLI-Carrier
                        variable: request.headers.mli-carrier
                      MLI-GeoLocationLat:
                        schema:
                          type: string
                          title: MLI-GeoLocationLat
                        variable: request.headers.mli-geolocationlat
                      MLI-GeoLocationLong:
                        schema:
                          type: string
                          title: MLI-GeoLocationLong
                        variable: request.headers.mli-geolocationlong
                      MLI-SessionToken:
                        schema:
                          type: string
                          title: MLI-SessionToken
                        variable: request.headers.mli-sessiontoken
                      MLI-TransactionToken:
                        schema:
                          type: string
                          title: MLI-TransactionToken
                        variable: request.headers.mli-transactiontoken
                      authorizationToken:
                        schema:
                          type: string
                          title: authorizationToken
                        variable: authorizationToken
                    outputs:
                      output:
                        schema:
                          $ref: >-
                            #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/GetSecurityQuestionsInput
                        variable: message.body
                        content: application/xml
                      content-type:
                        schema:
                          type: string
                          title: content-type
                        variable: message.headers.content-type
                      SOAPAction:
                        schema:
                          type: string
                        variable: message.headers.SOAPAction
                    actions:
                      - set: >-
                          output.Envelope.Body.GetSecurityQuestions.CommonParms.SourceSystemID
                        from: MLI-SourceSystemID
                      - set: >-
                          output.Envelope.Body.GetSecurityQuestions.CommonParms.Language
                        from: Accept-Language
                      - set: >-
                          output.Envelope.Body.GetSecurityQuestions.CommonParms.OriginatingIP
                        from: MLI-OriginatingIP
                      - set: >-
                          output.Envelope.Body.GetSecurityQuestions.CommonParms.Application
                        from: MLI-Application
                      - set: >-
                          output.Envelope.Body.GetSecurityQuestions.CommonParms.ApplicationVersion
                        from: MLI-ApplicationVersion
                      - set: >-
                          output.Envelope.Body.GetSecurityQuestions.CommonParms.DeviceID
                        from: MLI-DeviceID
                      - set: >-
                          output.Envelope.Body.GetSecurityQuestions.CommonParms.DeviceType
                        from: MLI-DeviceType
                      - set: >-
                          output.Envelope.Body.GetSecurityQuestions.CommonParms.Carrier
                        from: MLI-Carrier
                      - set: >-
                          output.Envelope.Body.GetSecurityQuestions.CommonParms.GeoLocation.Latitude
                        from: MLI-GeoLocationLat
                      - set: >-
                          output.Envelope.Body.GetSecurityQuestions.CommonParms.GeoLocation.Longitude
                        from: MLI-GeoLocationLong
                      - set: >-
                          output.Envelope.Body.GetSecurityQuestions.CommonParms.SessionToken
                        from: MLI-SessionToken
                      - set: >-
                          output.Envelope.Body.GetSecurityQuestions.CommonParms.TransactionToken
                        from: MLI-TransactionToken
                      - set: output.Envelope.Header.Security.UsernameToken.Username
                        default: $(username)
                      - set: output.Envelope.Header.Security.UsernameToken.Password
                        default: $(password)
                      - set: content-type
                        default: text/xml
                      - set: SOAPAction
                        default: >-
                          http://www.manulifebank.com/auth/ws/2.1/GetSecurityQuestions
            - operations:
                - RegisterSecurityQuestions
              execute:
                - map:
                    title: registersecqsn
                    inputs:
                      MLI-SourceSystemID:
                        schema:
                          type: string
                          title: MLI-SourceSystemID
                        variable: varSourceSystemID
                      MLI-Application:
                        schema:
                          type: string
                          title: MLI-Application
                        variable: request.headers.mli-application
                      Accept-Language:
                        schema:
                          type: string
                          title: Accept-Language
                        variable: request.headers.accept-language
                      MLI-OriginatingIP:
                        schema:
                          type: string
                          title: MLI-OriginatingIP
                        variable: request.headers.mli-originatingip
                      MLI-ApplicationVersion:
                        schema:
                          type: string
                          title: MLI-ApplicationVersion
                        variable: request.headers.mli-applicationversion
                      MLI-DeviceID:
                        schema:
                          type: string
                          title: MLI-DeviceID
                        variable: request.headers.mli-deviceid
                      MLI-DeviceType:
                        schema:
                          type: string
                          title: MLI-DeviceType
                        variable: request.headers.mli-devicetype
                      MLI-Carrier:
                        schema:
                          type: string
                          title: MLI-Carrier
                        variable: request.headers.mli-carrier
                      MLI-GeoLocationLat:
                        schema:
                          type: string
                          title: MLI-GeoLocationLat
                        variable: request.headers.mli-geolocationlat
                      MLI-GeoLocationLong:
                        schema:
                          type: string
                          title: MLI-GeoLocationLong
                        variable: request.headers.mli-geolocationlong
                      MLI-SessionToken:
                        schema:
                          type: string
                          title: MLI-SessionToken
                        variable: request.headers.mli-sessiontoken
                      MLI-TransactionToken:
                        schema:
                          type: string
                          title: MLI-TransactionToken
                        variable: request.headers.mli-transactiontoken
                      authorizationToken:
                        schema:
                          type: string
                          title: authorizationToken
                        variable: authorizationToken
                      input:
                        schema:
                          $ref: '#/definitions/RegisterSecurityQuestions_Input'
                        variable: request.body
                        content: application/json
                    outputs:
                      output:
                        schema:
                          $ref: >-
                            #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/RegisterSecurityQuestionsInput
                        variable: message.body
                        content: application/xml
                      content-type:
                        schema:
                          type: string
                          title: content-type
                        variable: message.headers.content-type
                      SOAPAction:
                        schema:
                          type: string
                        variable: message.headers.SOAPAction
                    actions:
                      - set: >-
                          output.Envelope.Header.AuthenticationHeader.AuthenticationToken
                        from: authorizationToken
                      - set: output.Envelope.Header.Security.UsernameToken.Username
                        default: $(username)
                      - set: output.Envelope.Header.Security.UsernameToken.Password
                        default: $(password)
                      - set: >-
                          output.Envelope.Body.RegisterSecurityQuestions.CommonParms.SourceSystemID
                        from: MLI-SourceSystemID
                      - set: >-
                          output.Envelope.Body.RegisterSecurityQuestions.CommonParms.Application
                        from: MLI-Application
                      - set: >-
                          output.Envelope.Body.RegisterSecurityQuestions.CommonParms.Language
                        from: Accept-Language
                      - set: >-
                          output.Envelope.Body.RegisterSecurityQuestions.CommonParms.OriginatingIP
                        from: MLI-OriginatingIP
                      - set: >-
                          output.Envelope.Body.RegisterSecurityQuestions.CommonParms.ApplicationVersion
                        from: MLI-ApplicationVersion
                      - set: >-
                          output.Envelope.Body.RegisterSecurityQuestions.CommonParms.DeviceID
                        from: MLI-DeviceID
                      - set: >-
                          output.Envelope.Body.RegisterSecurityQuestions.CommonParms.DeviceType
                        from: MLI-DeviceType
                      - set: >-
                          output.Envelope.Body.RegisterSecurityQuestions.CommonParms.Carrier
                        from: MLI-Carrier
                      - set: >-
                          output.Envelope.Body.RegisterSecurityQuestions.CommonParms.GeoLocation.Latitude
                        from: MLI-GeoLocationLat
                      - set: >-
                          output.Envelope.Body.RegisterSecurityQuestions.CommonParms.GeoLocation.Longitude
                        from: MLI-GeoLocationLong
                      - set: >-
                          output.Envelope.Body.RegisterSecurityQuestions.CommonParms.SessionToken
                        from: MLI-SessionToken
                      - set: >-
                          output.Envelope.Body.RegisterSecurityQuestions.CommonParms.TransactionToken
                        from: MLI-TransactionToken
                      - set: >-
                          output.Envelope.Body.RegisterSecurityQuestions.CardNumber
                        from: input.CardNumber
                      - create: output.Envelope.Body.RegisterSecurityQuestions.Answer
                        from: input.Answer
                        foreach: input.Answer
                        actions:
                          - set: QuestionID
                            from: QuestionID
                          - set: Answer
                            from: Answer
                      - set: content-type
                        default: text/xml
                      - set: SOAPAction
                        default: >-
                          http://www.manulifebank.com/auth/ws/2.1/RegisterSecurityQuestions
          otherwise: []
      - xslt:
          title: remove-empty-tag
          input: true
          source: "<xsl:stylesheet version=\"1.0\" xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\" xmlns:tns=\"http://www.manulifebank.com/bankcommon/1.0\">\r\n<xsl:output omit-xml-declaration=\"yes\" indent=\"yes\"/>\r\n<xsl:strip-space elements=\"*\"/>\r\n <xsl:template match=\"node()|@*\">\r\n    <xsl:copy>\r\n      <xsl:apply-templates select=\"node()|@*\"/>\r\n     </xsl:copy>\r\n  </xsl:template>\r\n<xsl:template match=\r\n    \"*[not(@*|*|comment()|processing-instruction()) \r\n     and normalize-space()=''\r\n      ]\"/>\r\n<xsl:template match=\"GeoLocation[Latitude='' or  Longitude='']\"/>\r\n<xsl:template match=\"Answer[QuestionID='' or  Answer='']\"/>\r\n<xsl:template match=\"tns:AuthenticationHeader[AuthenticationToken='']\"/>\r\n</xsl:stylesheet>\r\n"
      - invoke:
          title: invoke-backend
          target-url: $(varSOAPEndpoint)
          timeout: 60
          verb: POST
          cache-response: protocol
          cache-ttl: 900
          tls-profile: $(varTLSProfile)
          output: AuthenticateOut
      - operation-switch:
          title: operation-switch
          case:
            - operations:
                - banklogin
              execute:
                - map:
                    title: AuthenticateFault
                    inputs:
                      input:
                        schema:
                          $ref: >-
                            #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/AuthenticateFault
                        variable: AuthenticateOut.body
                    outputs:
                      varFaultCode:
                        schema:
                          type: string
                          title: faultCode
                        variable: varFaultCode
                      varFaultString:
                        schema:
                          type: string
                          title: FaultString
                        variable: varFaultString
                      varErrorCode:
                        schema:
                          type: string
                        variable: varErrorCode
                      varErrorMessage:
                        schema:
                          type: string
                        variable: varErrorMessage
                    actions: []
            - operations:
                - ChangePassword
              execute:
                - map:
                    title: ChangePasswordFault
                    inputs:
                      ChangePassword:
                        schema:
                          $ref: >-
                            #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/ChangePasswordFault
                        variable: AuthenticateOut.body
                        content: application/xml
                    outputs:
                      varFaultCode:
                        schema:
                          type: string
                          title: varFaultCode
                        variable: varFaultCode
                      varFaultString:
                        schema:
                          type: string
                          title: varFaultString
                        variable: varFaultString
                      varErrorCode:
                        schema:
                          type: string
                          title: varErrorCode
                        variable: varErrorCode
                      varErrorMessage:
                        schema:
                          type: string
                          title: varErrorMessage
                        variable: varErrorMessage
                    actions:
                      - set: varFaultCode
                        from: ChangePassword.Envelope.Body.Fault.faultcode
                      - set: varFaultString
                        from: ChangePassword.Envelope.Body.Fault.faultstring
                      - set: varErrorCode
                        from: >-
                          ChangePassword.Envelope.Body.Fault.detail.ErrorInfo.Code
                      - set: varErrorMessage
                        from: >-
                          ChangePassword.Envelope.Body.Fault.detail.ErrorInfo.Message
            - operations:
                - ResetPassword
              execute:
                - map:
                    title: ResetPasswordFault
                    inputs:
                      ResetPassword:
                        schema:
                          $ref: >-
                            #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/ResetPasswordFault
                        variable: AuthenticateOut.body
                        content: application/xml
                    outputs:
                      varFaultCode:
                        schema:
                          type: string
                          title: varFaultCode
                        variable: varFaultCode
                      varFaultString:
                        schema:
                          type: string
                          title: varFaultString
                        variable: varFaultString
                      varErrorCode:
                        schema:
                          type: string
                          title: varErrorCode
                        variable: varErrorCode
                      varErrorMessage:
                        schema:
                          type: string
                          title: varErrorMessage
                        variable: varErrorMessage
                    actions:
                      - set: varFaultCode
                        from: ResetPassword.Envelope.Body.Fault.faultcode
                      - set: varFaultString
                        from: ResetPassword.Envelope.Body.Fault.faultstring
                      - set: varErrorCode
                        from: >-
                          ResetPassword.Envelope.Body.Fault.detail.ErrorInfo.Code
                      - set: varErrorMessage
                        from: >-
                          ResetPassword.Envelope.Body.Fault.detail.ErrorInfo.Message
            - operations:
                - GetPasswordResetQuestions
              execute:
                - map:
                    title: GetPasswordFault
                    inputs:
                      input:
                        schema:
                          $ref: >-
                            #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/GetPasswordResetQuestionsFault
                        variable: AuthenticateOut.body
                    outputs:
                      varFaultCode:
                        schema:
                          type: string
                          title: faultCode
                        variable: varFaultCode
                      varFaultString:
                        schema:
                          type: string
                          title: FaultString
                        variable: varFaultString
                      varErrorCode:
                        schema:
                          type: string
                        variable: varErrorCode
                      varErrorMessage:
                        schema:
                          type: string
                        variable: varErrorMessage
                    actions:
                      - set: varFaultCode
                        from: input.Envelope.Body.Fault.faultcode
                      - set: varFaultString
                        from: input.Envelope.Body.Fault.faultstring
                      - set: varErrorCode
                        from: input.Envelope.Body.Fault.detail.ErrorInfo.Code
                      - set: varErrorMessage
                        from: input.Envelope.Body.Fault.detail.ErrorInfo.Message
            - operations:
                - ValidateVerificationQuestions
              execute:
                - map:
                    title: ValidateQuestionFault
                    inputs:
                      input:
                        schema:
                          $ref: >-
                            #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/ValidateVerificationQuestionsFault
                        variable: AuthenticateOut.body
                    outputs:
                      varFaultCode:
                        schema:
                          type: string
                          title: faultCode
                        variable: varFaultCode
                      varFaultString:
                        schema:
                          type: string
                          title: FaultString
                        variable: varFaultString
                      varErrorCode:
                        schema:
                          type: string
                        variable: varErrorCode
                      varErrorMessage:
                        schema:
                          type: string
                        variable: varErrorMessage
                    actions:
                      - set: varFaultCode
                        from: input.Envelope.Body.Fault.faultcode
                      - set: varFaultString
                        from: input.Envelope.Body.Fault.faultstring
                      - set: varErrorCode
                        from: input.Envelope.Body.Fault.detail.ErrorInfo.Code
                      - set: varErrorMessage
                        from: input.Envelope.Body.Fault.detail.ErrorInfo.Message
            - operations:
                - GetSecurityQuestions
              execute:
                - map:
                    title: getsecqsn-fault
                    inputs:
                      input:
                        schema:
                          $ref: >-
                            #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/GetSecurityQuestionsFault
                        variable: AuthenticateOut.body
                        content: application/xml
                    outputs:
                      varFaultCode:
                        schema:
                          type: string
                          title: faultCode
                        variable: varFaultCode
                      varFaultString:
                        schema:
                          type: string
                          title: FaultString
                        variable: varFaultString
                      varErrorCode:
                        schema:
                          type: string
                        variable: varErrorCode
                      varErrorMessage:
                        schema:
                          type: string
                        variable: varErrorMessage
                    actions:
                      - set: varFaultCode
                        from: input.Envelope.Body.Fault.faultcode
                      - set: varFaultString
                        from: input.Envelope.Body.Fault.faultstring
                      - set: varErrorCode
                        from: input.Envelope.Body.Fault.detail.ErrorInfo.Code
                      - set: varErrorMessage
                        from: input.Envelope.Body.Fault.detail.ErrorInfo.Message
            - operations:
                - RegisterSecurityQuestions
              execute:
                - map:
                    title: registersecqsn-fault
                    inputs:
                      input:
                        schema:
                          $ref: >-
                            #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/RegisterSecurityQuestionsFault
                        variable: AuthenticateOut.body
                        content: application/xml
                    outputs:
                      varFaultCode:
                        schema:
                          type: string
                          title: faultCode
                        variable: varFaultCode
                      varFaultString:
                        schema:
                          type: string
                          title: FaultString
                        variable: varFaultString
                      varErrorCode:
                        schema:
                          type: string
                        variable: varErrorCode
                      varErrorMessage:
                        schema:
                          type: string
                        variable: varErrorMessage
                    actions:
                      - set: varFaultCode
                        from: input.Envelope.Body.Fault.faultcode
                      - set: varFaultString
                        from: input.Envelope.Body.Fault.faultstring
                      - set: varErrorCode
                        from: input.Envelope.Body.Fault.detail.ErrorInfo.Code
                      - set: varErrorMessage
                        from: input.Envelope.Body.Fault.detail.ErrorInfo.Message
          otherwise: []
      - if:
          title: if-check-fault
          condition: '$(varFaultCode).replace({},'''').length>0'
          execute:
            - gatewayscript:
                title: debug-invoke
                source: >-

                  apim.setvariable('message.body',
                  apim.getvariable('AuthenticateOut.body'));
            - throw:
                title: throw
                name: LoginBizException
      - operation-switch:
          title: operation-switch
          case:
            - operations:
                - banklogin
              execute:
                - gatewayscript:
                    title: debug
                    source: >-
                      var apic = require('local:///isp/policy/apim.custom.js');


                      var mapsApiRsp = apic.getvariable('AuthenticateOut.body');


                      //var varBankAuthToken = 
                      apic.getvariable('varBankAuthToken');


                      apic.setvariable('message.body', mapsApiRsp);
                - map:
                    title: map-bank-token
                    inputs:
                      input:
                        schema:
                          $ref: >-
                            #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/AuthenticateOutput
                        variable: AuthenticateOut.body
                        content: application/xml
                    outputs:
                      varBankAuthToken:
                        schema:
                          type: string
                          title: varBankAuthToken
                        variable: varBankAuthToken
                      varSecureAction:
                        schema:
                          type: string
                          title: varSecureAction
                        variable: varSecureAction
                      varAuthSessionToken:
                        schema:
                          type: string
                        variable: varAuthSessionToken
                    actions:
                      - set: claim
                        from: myClaim
                      - set: JWT
                        from: varGeneratedJWT
                      - set: output_1
                        from: varBankAuthToken
                      - set: output.AuthorizationToken
                        default: $(varGeneratedJWT)
                      - set: output.QueryResponseAuthorizationToken
                        default: $(varGeneratedJWT)
                      - set: varSecureAction
                        from: input.Envelope.Body.AuthenticateResponse.SecureAction
                      - set: varBankAuthToken
                        from: >-
                          input.Envelope.Body.AuthenticateResponse.AuthenticationToken
                      - set: varAuthSessionToken
                        from: >-
                          input.Envelope.Body.AuthenticateResponse.AuthenticationSessionToken
                - if:
                    title: if-empty-token
                    condition: $(varSecureAction)!='Deny'
                    execute:
                      - gatewayscript:
                          title: prep-claim
                          source: >
                            var obj = 'system.datetime';

                            var objValue = apim.getvariable(obj);

                            console.error( 'prep claim - ' + obj + ' = ' +
                            objValue );


                            //var varBankAuthToken = "cid:1234567";


                            var authToken =
                            apim.getvariable('varBankAuthToken');

                            var authSessionToken =
                            apim.getvariable('varAuthSessionToken');


                            var claimContentSession = '';

                            var claimContentAuth = '';


                            if(authSessionToken.length>4){
                                claimContentSession = '{"tokenCreated": "' + objValue + '", "bankAuthorizationToken": "' + authSessionToken + '"}';
                                apim.setvariable( 'myClaim', claimContentSession, 'set' );
                                apim.setvariable( 'sessionTokenFlag', 'Yes', 'add' );
                                
                            }


                            if(authToken.length>4){
                                claimContentAuth = '{"tokenCreated": "' + objValue + '", "bankAuthorizationToken": "' + authToken + '"}';
                                apim.setvariable( 'myClaim', claimContentAuth, 'set' );
                                apim.setvariable( 'sessionTokenFlag', 'No', 'add' );
                                
                            }
                      - jwt-generate:
                          title: jwt-generate
                          iss-claim: ''
                          exp-claim: 3600
                          jwt: varGeneratedJWT
                          aud-claim: ''
                          jws-jwk: hs512-key
                          jws-alg: HS512
                          jwe-enc: A256CBC-HS512
                          jwe-alg: dir
                          private-claims: myClaim
                          jwe-jwk: hs512-enc-key
                      - gatewayscript:
                          title: gatewayscript
                          source: >-
                            var tokenFlag =
                            apim.getvariable('sessionTokenFlag');

                            var tokenJWT = apim.getvariable('varGeneratedJWT');


                            if (tokenFlag =='No'){
                                apim.setvariable('bankAuthJWT', tokenJWT, 'add');
                            }


                            if (tokenFlag =='Yes'){
                                apim.setvariable('bankSessionJWT', tokenJWT, 'add');
                            }
                - map:
                    title: map-jsonresponse
                    inputs:
                      bankAuthJWT:
                        schema:
                          type: string
                        variable: bankAuthJWT
                      bankSessionJWT:
                        schema:
                          type: string
                        variable: bankSessionJWT
                      input:
                        schema:
                          $ref: >-
                            #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/AuthenticateOutput
                        variable: AuthenticateOut.body
                        content: application/xml
                    outputs:
                      output:
                        schema:
                          $ref: '#/definitions/Authenticate_Output'
                        variable: message.body
                        content: application/json
                    actions:
                      - set: output.AuthorizationToken
                        from: bankAuthJWT
                      - set: output.QueryResponseAuthorizationToken
                        from: bankSessionJWT
                      - set: output.Code
                        from: input.Envelope.Body.AuthenticateResponse.Code
                      - set: output.ChangePassword
                        from: >-
                          input.Envelope.Body.AuthenticateResponse.ChangePassword
                      - set: output.SecureAction
                        from: input.Envelope.Body.AuthenticateResponse.SecureAction
                      - set: output.Registered
                        from: input.Envelope.Body.AuthenticateResponse.Registered
                      - set: output.SecurityQuestion.QuestionID
                        from: >-
                          input.Envelope.Body.AuthenticateResponse.SecurityQuestion.QuestionID
                      - set: output.SecurityQuestion.QuestionText
                        from: >-
                          input.Envelope.Body.AuthenticateResponse.SecurityQuestion.QuestionText
                      - set: output.CustomerDetails.DoB
                        from: >-
                          input.Envelope.Body.AuthenticateResponse.CustomerDetails.BirthDate
                      - set: output.PreferredLanguage
                        from: >-
                          input.Envelope.Body.AuthenticateResponse.CustomerDetails.PreferredLanguage
                      - set: output.ApplicationStatus
                        from: >-
                          input.Envelope.Body.AuthenticateResponse.CustomerDetails.Status
                      - set: output.CustomerDetails.FirstName
                        from: >-
                          input.Envelope.Body.AuthenticateResponse.CustomerDetails.FirstName
                      - set: output.CustomerDetails.LastName
                        from: >-
                          input.Envelope.Body.AuthenticateResponse.CustomerDetails.LastName
                      - set: output.CustomerDetails.Sin
                        from: >-
                          input.Envelope.Body.AuthenticateResponse.CustomerDetails.Sin
                - gatewayscript:
                    title: debug-response
                    source: //
            - operations:
                - GetPasswordResetQuestions
              execute:
                - map:
                    title: getqsntoken
                    inputs:
                      input:
                        schema:
                          $ref: >-
                            #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/GetPasswordResetQuestionsOutput
                        variable: AuthenticateOut.body
                        content: application/xml
                    outputs:
                      varForgotPasswordToken:
                        schema:
                          type: string
                        variable: varForgotPasswordToken
                    actions:
                      - set: varAuthSessionToken
                        from: >-
                          input.Envelope.Body.GetPasswordResetQuestionsResponse.ForgotPasswordToken
                      - set: output_1
                        from: input_1
                      - set: varForgotPasswordToken
                        from: >-
                          input.Envelope.Body.GetPasswordResetQuestionsResponse.ForgotPasswordToken
                      - set: varVerifyPasswordToken
                        from: >-
                          input.Envelope.Body.ValidateVerificationQuestionsResponse.ForgotPasswordToken
                - gatewayscript:
                    title: prep-claim
                    source: >
                      var obj = 'system.datetime';

                      var objValue = apim.getvariable(obj);

                      console.error( 'prep claim - ' + obj + ' = ' + objValue );


                      //var varBankAuthToken = "cid:1234567";


                      var forgotPasswdToken =
                      apim.getvariable('varForgotPasswordToken');


                      if(forgotPasswdToken.length>8){
                          var claimContentAuth = '{"tokenCreated": "' + objValue + '", "bankAuthorizationToken": "' + forgotPasswdToken + '"}';
                          apim.setvariable( 'myClaim', claimContentAuth, 'set' );
                      }
                - jwt-generate:
                    title: jwt-generate
                    iss-claim: ''
                    exp-claim: 3600
                    jwt: varGeneratedJWT
                    aud-claim: ''
                    jws-jwk: hs512-key
                    jws-alg: HS512
                    jwe-enc: A256CBC-HS512
                    jwe-alg: dir
                    private-claims: myClaim
                    jwe-jwk: hs512-enc-key
                - map:
                    title: getqsnresponse
                    inputs:
                      varGeneratedJWT:
                        schema:
                          type: string
                        variable: varGeneratedJWT
                      input:
                        schema:
                          $ref: >-
                            #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/GetPasswordResetQuestionsOutput
                        variable: AuthenticateOut.body
                        content: application/xml
                    outputs:
                      output:
                        schema:
                          $ref: '#/definitions/GetPasswordResetQuestionsResponse'
                        variable: message.body
                        content: application/json
                    actions:
                      - create: output.Questions.Question
                        from: >-
                          input.Envelope.Body.GetPasswordResetQuestionsResponse.Questions.Question
                        foreach: >-
                          input.Envelope.Body.GetPasswordResetQuestionsResponse.Questions.Question
                        actions:
                          - set: QuestionID
                            from: QuestionID
                          - set: QuestionText
                            from: QuestionText
                      - set: output.ForgotPasswordToken
                        from: varGeneratedJWT
            - operations:
                - ValidateVerificationQuestions
              execute:
                - map:
                    title: valiateqsn
                    inputs:
                      input:
                        schema:
                          $ref: >-
                            #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/ValidateVerificationQuestionsOutput
                        variable: AuthenticateOut.body
                        content: application/xml
                    outputs:
                      varVerifyPasswordToken:
                        schema:
                          type: string
                        variable: varVerifyPasswordToken
                    actions:
                      - set: varVerifyPasswordToken
                        from: >-
                          input.Envelope.Body.ValidateVerificationQuestionsResponse.ForgotPasswordToken
                - gatewayscript:
                    title: prep-claim
                    source: >
                      var obj = 'system.datetime';

                      var objValue = apim.getvariable(obj);

                      console.error( 'prep claim - ' + obj + ' = ' + objValue );


                      var verifyPasswdToken =
                      apim.getvariable('varVerifyPasswordToken');


                      if(verifyPasswdToken.length>8){
                          var claimContentAuth = '{"tokenCreated": "' + objValue + '", "bankAuthorizationToken": "' + verifyPasswdToken + '"}';
                          apim.setvariable( 'myClaim', claimContentAuth, 'set' );
                      }
                - jwt-generate:
                    title: jwt-generate
                    iss-claim: ''
                    exp-claim: 3600
                    jwt: varGeneratedJWT
                    aud-claim: ''
                    jws-jwk: hs512-key
                    jws-alg: HS512
                    jwe-enc: A256CBC-HS512
                    jwe-alg: dir
                    private-claims: myClaim
                    jwe-jwk: hs512-enc-key
                - map:
                    title: verifyqsnresponse
                    inputs:
                      input:
                        schema:
                          $ref: >-
                            #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/ValidateVerificationQuestionsOutput
                        variable: AuthenticateOut.body
                        content: application/xml
                      verifyPasswdToken:
                        schema:
                          type: string
                        variable: verifyPasswdToken
                      varGeneratedJWT:
                        schema:
                          type: string
                        variable: varGeneratedJWT
                    outputs:
                      output:
                        schema:
                          $ref: '#/definitions/ValidateVerificationQsnOutput'
                        variable: message.body
                        content: application/json
                    actions:
                      - set: output.Successful
                        from: >-
                          input.Envelope.Body.ValidateVerificationQuestionsResponse.Successful
                      - set: output.ForgotPasswordToken
                        from: varGeneratedJWT
            - operations:
                - ChangePassword
              execute:
                - map:
                    title: ChangePasswordOutput
                    inputs:
                      ChangePassword:
                        schema:
                          $ref: >-
                            #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/ChangePasswordOutput
                        variable: AuthenticateOut.body
                        content: application/xml
                    outputs:
                      output:
                        schema:
                          $ref: '#/definitions/ChangePassword_Output'
                        variable: message.body
                        content: application/json
                    actions:
                      - set: output.Code
                        from: >-
                          ChangePassword.Envelope.Body.ChangePasswordResponse.Code
                      - set: output.Message
                        from: >-
                          ChangePassword.Envelope.Body.ChangePasswordResponse.Message
                      - set: output.Successful
                        from: >-
                          ChangePassword.Envelope.Body.ChangePasswordResponse.Successful
            - operations:
                - ResetPassword
              execute:
                - map:
                    title: ResetPasswordOutput
                    inputs:
                      ResetPassword:
                        schema:
                          $ref: >-
                            #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/ResetPasswordOutput
                        variable: AuthenticateOut.body
                        content: application/xml
                    outputs:
                      output:
                        schema:
                          $ref: '#/definitions/ResetPassword_Output'
                        variable: message.body
                        content: application/json
                    actions:
                      - set: output.Code
                        from: ResetPassword.Envelope.Body.ResetPasswordResponse.Code
                      - set: output.Message
                        from: >-
                          ResetPassword.Envelope.Body.ResetPasswordResponse.Message
                      - set: output.Successful
                        from: >-
                          ResetPassword.Envelope.Body.ResetPasswordResponse.Successful
            - operations:
                - GetSecurityQuestions
              execute:
                - map:
                    title: getsecqsn
                    inputs:
                      input:
                        schema:
                          $ref: >-
                            #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/GetSecurityQuestionsOutput
                        variable: AuthenticateOut.body
                        content: application/xml
                    outputs:
                      output:
                        schema:
                          $ref: '#/definitions/GetSecurityQuestions_Output'
                        variable: message.body
                        content: application/json
                    actions:
                      - create: output.Questions.Question
                        from: >-
                          input.Envelope.Body.GetSecurityQuestionsResponse.Questions.Question
                        foreach: >-
                          input.Envelope.Body.GetSecurityQuestionsResponse.Questions.Question
                        actions:
                          - set: QuestionID
                            from: QuestionID
                          - set: QuestionText
                            from: QuestionText
            - operations:
                - RegisterSecurityQuestions
              execute:
                - map:
                    title: registersecqsn
                    inputs:
                      input:
                        schema:
                          $ref: >-
                            #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/RegisterSecurityQuestionsOutput
                        variable: AuthenticateOut.body
                        content: application/xml
                    outputs:
                      output:
                        schema:
                          $ref: '#/definitions/RegisterSecurityQuestions_Output'
                        variable: message.body
                        content: application/json
                    actions:
                      - set: output.Code
                        from: >-
                          input.Envelope.Body.RegisterSecurityQuestionsResponse.Code
                      - set: output.Message
                        from: >-
                          input.Envelope.Body.RegisterSecurityQuestionsResponse.Message
                      - set: output.Successful
                        from: >-
                          input.Envelope.Body.RegisterSecurityQuestionsResponse.Successful
          otherwise: []
      - gatewayscript:
          title: process Accept header
          source: >
            var hm = require('header-metadata');

            //console.error('var hm =... '+ hm);


            // Retrieve a single current header value. Read the 

            // content-type header (case insensitive). 

            var headerAccept = hm.original.get('accept');

            console.error('headerAccept = '+ headerAccept);


            if (headerAccept.toLowerCase() == 'application/xml') {
                apim.setvariable('varIsOutputAsXML', true );
            } else {
                apim.setvariable('varIsOutputAsXML', false );
            }

            console.error('set varIsOutputAsXML to '+
            apim.getvariable('varIsOutputAsXML'));
      - if:
          title: if varIsOutputAsXML
          condition: |-
            //apim.getvariable('varIsOutputAsXML')
            $(request.headers.accept) == 'application/xml'
          execute:
            - json-to-xml:
                title: json-to-xml
                root-element-name: AuthenticateResponse
                always-output-root-element: false
      - gatewayscript:
          title: debug response
          source: console.error('converted output to XML');
      - activity-log:
          title: activity-log
          content: payload
          error-content: payload
    catch:
      - errors:
          - LoginBizException
        execute:
          - gatewayscript:
              title: gatewayscript
              source: '//apim.setvariable(''varFaultCode'', ''Bad Input'');'
          - map:
              title: error-exception
              inputs:
                varFaultCode:
                  schema:
                    type: string
                    title: varFaultCode
                  variable: varFaultCode
                varFaultString:
                  schema:
                    type: string
                    title: varFaultString
                  variable: varFaultString
                varErrorCode:
                  schema:
                    type: string
                    title: varErrorCode
                  variable: varErrorCode
                varErrorString:
                  schema:
                    type: string
                    title: varErrorString
                  variable: varErrorString
              outputs:
                output:
                  schema:
                    $ref: '#/definitions/Error'
                  variable: message.body
              actions:
                - set: output.FaultCode
                  from: varFaultCode
                - set: output.FaultString
                  from: varFaultString
                - set: output.Code
                  from: varErrorCode
                - set: output.Message
                  from: varErrorString
                - set: output.Status
                  default: failure
  enforced: true
  testable: true
  phase: realized
  cors:
    enabled: true
  gateway: datapower-gateway
  targets:
    AuthWS_V_2_1:
      swagger: '2.0'
      info:
        title: AuthWS_V_2_1
        description: ''
        x-ibm-name: authwsv21
        version: 1.0.0
      schemes:
        - https
      basePath: /AuthWS_V_2_1
      produces:
        - application/xml
      consumes:
        - text/xml
      securityDefinitions:
        clientID:
          type: apiKey
          name: X-IBM-Client-Id
          in: header
          description: ''
      security:
        - clientID: []
      x-ibm-configuration:
        type: wsdl
        wsdl-definition:
          wsdl: 57fde2b40cf2fb409d68ec74
          service: AuthWS_V_2_1
          port: AuthWS_V_2_1
          soap-version: '1.1'
        assembly:
          execute:
            - proxy:
                title: proxy
                target-url: >-
                  https://mbcdev3mobile.manulife.com:10090/Bank_AuthenticationServices/AuthWS_V_2_1
        gateway: datapower-gateway
        enforced: true
        testable: true
        phase: realized
        cors:
          enabled: true
      paths:
        /Authenticate:
          post:
            summary: Operation Authenticate
            description: Authenticates a client.
            operationId: Authenticate
            parameters:
              - in: body
                name: body
                required: true
                schema:
                  $ref: >-
                    #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/AuthenticateInput
            responses:
              '500':
                description: ''
                schema:
                  $ref: >-
                    #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/AuthenticateFault
              default:
                description: ''
                schema:
                  $ref: >-
                    #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/AuthenticateOutput
            x-ibm-soap:
              soap-action: 'http://www.manulifebank.com/auth/ws/2.1/Authenticate'
              soap-operation: '{http://www.manulifebank.com/auth/ws/2.1}Authenticate'
        /ChangePassword:
          post:
            summary: Operation ChangePassword
            description: Changes the password associated with a card number.
            operationId: ChangePassword
            parameters:
              - in: body
                name: body
                required: true
                schema:
                  $ref: >-
                    #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/ChangePasswordInput
            responses:
              '500':
                description: ''
                schema:
                  $ref: >-
                    #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/ChangePasswordFault
              default:
                description: ''
                schema:
                  $ref: >-
                    #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/ChangePasswordOutput
            x-ibm-soap:
              soap-action: 'http://www.manulifebank.com/auth/ws/2.1/ChangePassword'
              soap-operation: '{http://www.manulifebank.com/auth/ws/2.1}ChangePassword'
        /ValidateVerificationQuestions:
          post:
            summary: Operation ValidateVerificationQuestions
            description: Validates security verification answers.
            operationId: ValidateVerificationQuestions
            parameters:
              - in: body
                name: body
                required: true
                schema:
                  $ref: >-
                    #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/ValidateVerificationQuestionsInput
            responses:
              '500':
                description: ''
                schema:
                  $ref: >-
                    #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/ValidateVerificationQuestionsFault
              default:
                description: ''
                schema:
                  $ref: >-
                    #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/ValidateVerificationQuestionsOutput
            x-ibm-soap:
              soap-action: >-
                http://www.manulifebank.com/auth/ws/2.1/ValidateVerificationQuestions
              soap-operation: >-
                {http://www.manulifebank.com/auth/ws/2.1}ValidateVerificationQuestions
        /ResetPassword:
          post:
            summary: Operation ResetPassword
            description: Resets a user's password.
            operationId: ResetPassword
            parameters:
              - in: body
                name: body
                required: true
                schema:
                  $ref: >-
                    #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/ResetPasswordInput
            responses:
              '500':
                description: ''
                schema:
                  $ref: >-
                    #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/ResetPasswordFault
              default:
                description: ''
                schema:
                  $ref: >-
                    #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/ResetPasswordOutput
            x-ibm-soap:
              soap-action: 'http://www.manulifebank.com/auth/ws/2.1/ResetPassword'
              soap-operation: '{http://www.manulifebank.com/auth/ws/2.1}ResetPassword'
        /GetPasswordResetQuestions:
          post:
            summary: Operation GetPasswordResetQuestions
            description: >-
              Verifies basic user information, and upon success, returns a list
              of verification questions for the purpose of password reset.
            operationId: GetPasswordResetQuestions
            parameters:
              - in: body
                name: body
                required: true
                schema:
                  $ref: >-
                    #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/GetPasswordResetQuestionsInput
            responses:
              '500':
                description: ''
                schema:
                  $ref: >-
                    #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/GetPasswordResetQuestionsFault
              default:
                description: ''
                schema:
                  $ref: >-
                    #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/GetPasswordResetQuestionsOutput
            x-ibm-soap:
              soap-action: >-
                http://www.manulifebank.com/auth/ws/2.1/GetPasswordResetQuestions
              soap-operation: >-
                {http://www.manulifebank.com/auth/ws/2.1}GetPasswordResetQuestions
        /GetSecurityQuestions:
          post:
            summary: Operation GetSecurityQuestions
            description: >-
              Verifies basic user information, and upon success, returns a list
              of security questions
            operationId: GetSecurityQuestions
            parameters:
              - in: body
                name: body
                required: true
                schema:
                  $ref: >-
                    #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/GetSecurityQuestionsInput
            responses:
              '500':
                description: ''
                schema:
                  $ref: >-
                    #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/GetSecurityQuestionsFault
              default:
                description: ''
                schema:
                  $ref: >-
                    #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/GetSecurityQuestionsOutput
            x-ibm-soap:
              soap-action: 'http://www.manulifebank.com/auth/ws/2.1/GetSecurityQuestions'
              soap-operation: '{http://www.manulifebank.com/auth/ws/2.1}GetSecurityQuestions'
        /RegisterSecurityQuestions:
          post:
            summary: Operation RegisterSecurityQuestions
            description: >-
              Verifies basic user information, and upon success, returns a list
              of security questions
            operationId: RegisterSecurityQuestions
            parameters:
              - in: body
                name: body
                required: true
                schema:
                  $ref: >-
                    #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/RegisterSecurityQuestionsInput
            responses:
              '500':
                description: ''
                schema:
                  $ref: >-
                    #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/RegisterSecurityQuestionsFault
              default:
                description: ''
                schema:
                  $ref: >-
                    #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/RegisterSecurityQuestionsOutput
            x-ibm-soap:
              soap-action: >-
                http://www.manulifebank.com/auth/ws/2.1/RegisterSecurityQuestions
              soap-operation: >-
                {http://www.manulifebank.com/auth/ws/2.1}RegisterSecurityQuestions
      definitions:
        Security:
          xml:
            namespace: >-
              http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd
            prefix: wsse
          type: object
          properties:
            UsernameToken:
              type: object
              properties:
                Username:
                  type: string
                Password:
                  type: string
        AuthenticateInput:
          type: object
          properties:
            Envelope:
              xml:
                prefix: soap-env
                namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
              type: object
              properties:
                Header:
                  $ref: >-
                    #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/AuthenticateHeader
                Body:
                  type: object
                  properties:
                    Authenticate:
                      $ref: >-
                        #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/Authenticate
          example: >-

            <soap-env:Envelope
            xmlns:soap-env="http://schemas.xmlsoap.org/soap/envelope/">
             <soap-env:Header>
              <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
               <UsernameToken>
                <Username>string</Username>
                <Password>string</Password>
               </UsernameToken>
              </wsse:Security>
             </soap-env:Header>
             <soap-env:Body>
              <tns:Authenticate xmlns:tns="http://www.manulifebank.com/auth/ws/2.1">
               <CommonParms>
                <SourceSystemID>string</SourceSystemID>
                <Application>string</Application>
                <Language>string</Language>
                <OriginatingIP>string</OriginatingIP>
                <ApplicationVersion>string</ApplicationVersion>
                <SessionToken>string</SessionToken>
                <TransactionToken>string</TransactionToken>
                <DeviceID>string</DeviceID>
                <DeviceType>string</DeviceType>
                <Carrier>string</Carrier>
                <GeoLocation>
                 <Latitude>string</Latitude>
                 <Longitude>string</Longitude>
                </GeoLocation>
                <TransactionSLA>3</TransactionSLA>
               </CommonParms>
               <CardNumber>string</CardNumber>
               <Password>string</Password>
               <BankSSOToken>string</BankSSOToken>
               <AuthenticationSessionToken>string</AuthenticationSessionToken>
               <Answer>
                <QuestionID>3</QuestionID>
                <Answer>string</Answer>
               </Answer>
               <AnswerPrevAttempts>3</AnswerPrevAttempts>
              </tns:Authenticate>
             </soap-env:Body>
            </soap-env:Envelope>
        AuthenticateOutput:
          type: object
          properties:
            Envelope:
              xml:
                prefix: soap-env
                namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
              type: object
              properties:
                Body:
                  type: object
                  properties:
                    AuthenticateResponse:
                      $ref: >-
                        #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/AuthenticateResponse
          example: >-

            <soap-env:Envelope
            xmlns:soap-env="http://schemas.xmlsoap.org/soap/envelope/">
             <soap-env:Body>
              <tns:AuthenticateResponse xmlns:tns="http://www.manulifebank.com/auth/ws/2.1">
               <Code>string</Code>
               <AuthenticationToken>string</AuthenticationToken>
               <AuthenticationSessionToken>string</AuthenticationSessionToken>
               <ChangePassword>true</ChangePassword>
               <SecureAction>string</SecureAction>
               <Registered>true</Registered>
               <AllowedToApplyForNewProducts>true</AllowedToApplyForNewProducts>
               <SecurityQuestion>
                <QuestionID>3</QuestionID>
                <QuestionText>string</QuestionText>
               </SecurityQuestion>
               <CustomerDetails>
                <FirstName>string</FirstName>
                <LastName>string</LastName>
                <PreferredLanguage>string</PreferredLanguage>
                <Status>string</Status>
                <Sin>string</Sin>
                <BirthDate>2016-04-18</BirthDate>
                <Address>
                 <AddressLine1>string</AddressLine1>
                 <AddressLine2>string</AddressLine2>
                 <AddressLine3>string</AddressLine3>
                 <City>string</City>
                 <Province>string</Province>
                 <PostalCode>string</PostalCode>
                 <Country>string</Country>
                </Address>
                <Contact>
                 <HomePhone>string</HomePhone>
                 <CellPhone>string</CellPhone>
                 <WorkPhone>string</WorkPhone>
                 <WorkPhoneExt>string</WorkPhoneExt>
                 <Email>string</Email>
                </Contact>
                <PoliticalExposure>
                 <CurrentExposure>true</CurrentExposure>
                 <EffectiveDate>2016-04-18</EffectiveDate>
                </PoliticalExposure>
                <IndustrySector>string</IndustrySector>
                <Occupation>string</Occupation>
                <EmployerName>string</EmployerName>
                <CustomerIdentities>
                 <CustomerIdentity><!-- between zero and unlimited repetitions of this element -->
                  <Type>string</Type>
                  <Sequence>string</Sequence>
                  <Description>string</Description>
                  <Required>string</Required>
                  <DueDate>2016-04-18</DueDate>
                  <ModifiedDate>2016-04-18</ModifiedDate>
                  <Number>string</Number>
                  <IssuedBy>string</IssuedBy>
                  <ExpiryDate>2016-04-18</ExpiryDate>
                 </CustomerIdentity>
                </CustomerIdentities>
               </CustomerDetails>
              </tns:AuthenticateResponse>
             </soap-env:Body>
            </soap-env:Envelope>
        AuthenticateHeader:
          type: object
          properties:
            Security:
              $ref: '#/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/Security'
        AuthenticateFault:
          type: object
          properties:
            Envelope:
              xml:
                prefix: soap-env
                namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
              type: object
              properties:
                Body:
                  type: object
                  properties:
                    Fault:
                      properties:
                        faultcode:
                          type: string
                        faultstring:
                          type: string
                        detail:
                          properties:
                            ErrorInfo:
                              $ref: >-
                                #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/AuthenticationServiceException
                            AuthenticationErrorInfo:
                              $ref: >-
                                #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/AuthenticationServiceException
        ChangePasswordInput:
          type: object
          properties:
            Envelope:
              xml:
                prefix: soap-env
                namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
              type: object
              properties:
                Header:
                  $ref: >-
                    #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/ChangePasswordHeader
                Body:
                  type: object
                  properties:
                    ChangePassword:
                      $ref: >-
                        #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/ChangePassword
          example: >-

            <soap-env:Envelope
            xmlns:soap-env="http://schemas.xmlsoap.org/soap/envelope/">
             <soap-env:Header>
              <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
               <UsernameToken>
                <Username>string</Username>
                <Password>string</Password>
               </UsernameToken>
              </wsse:Security>
              <bank:AuthenticationHeader xmlns:bank="http://www.manulifebank.com/bankcommon/1.0">
               <AuthenticationToken>string</AuthenticationToken>
               <HOSSOToken>string</HOSSOToken>
              </bank:AuthenticationHeader>
             </soap-env:Header>
             <soap-env:Body>
              <tns:ChangePassword xmlns:tns="http://www.manulifebank.com/auth/ws/2.1">
               <CommonParms>
                <SourceSystemID>string</SourceSystemID>
                <Application>string</Application>
                <Language>string</Language>
                <OriginatingIP>string</OriginatingIP>
                <ApplicationVersion>string</ApplicationVersion>
                <SessionToken>string</SessionToken>
                <TransactionToken>string</TransactionToken>
                <DeviceID>string</DeviceID>
                <DeviceType>string</DeviceType>
                <Carrier>string</Carrier>
                <GeoLocation>
                 <Latitude>string</Latitude>
                 <Longitude>string</Longitude>
                </GeoLocation>
                <TransactionSLA>3</TransactionSLA>
               </CommonParms>
               <Password>string</Password>
               <NewPassword>string</NewPassword>
              </tns:ChangePassword>
             </soap-env:Body>
            </soap-env:Envelope>
        ChangePasswordOutput:
          type: object
          properties:
            Envelope:
              xml:
                prefix: soap-env
                namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
              type: object
              properties:
                Body:
                  type: object
                  properties:
                    ChangePasswordResponse:
                      $ref: >-
                        #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/ChangePasswordResponse
          example: >-

            <soap-env:Envelope
            xmlns:soap-env="http://schemas.xmlsoap.org/soap/envelope/">
             <soap-env:Body>
              <tns:ChangePasswordResponse xmlns:tns="http://www.manulifebank.com/auth/ws/2.1">
               <Code>string</Code>
               <Message>string</Message>
               <Successful>true</Successful>
              </tns:ChangePasswordResponse>
             </soap-env:Body>
            </soap-env:Envelope>
        ChangePasswordHeader:
          type: object
          properties:
            AuthenticationHeader:
              $ref: >-
                #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/AuthenticationHeader
            Security:
              $ref: '#/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/Security'
        ChangePasswordFault:
          type: object
          properties:
            Envelope:
              xml:
                prefix: soap-env
                namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
              type: object
              properties:
                Body:
                  type: object
                  properties:
                    Fault:
                      properties:
                        faultcode:
                          type: string
                        faultstring:
                          type: string
                        detail:
                          properties:
                            ErrorInfo:
                              $ref: >-
                                #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/ChangePasswordServiceException
        ValidateVerificationQuestionsInput:
          type: object
          properties:
            Envelope:
              xml:
                prefix: soap-env
                namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
              type: object
              properties:
                Header:
                  $ref: >-
                    #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/ValidateVerificationQuestionsHeader
                Body:
                  type: object
                  properties:
                    ValidateVerificationQuestions:
                      $ref: >-
                        #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/ValidateVerificationQuestions
          example: >-

            <soap-env:Envelope
            xmlns:soap-env="http://schemas.xmlsoap.org/soap/envelope/">
             <soap-env:Header>
              <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
               <UsernameToken>
                <Username>string</Username>
                <Password>string</Password>
               </UsernameToken>
              </wsse:Security>
             </soap-env:Header>
             <soap-env:Body>
              <tns:ValidateVerificationQuestions xmlns:tns="http://www.manulifebank.com/auth/ws/2.1">
               <CommonParms>
                <SourceSystemID>string</SourceSystemID>
                <Application>string</Application>
                <Language>string</Language>
                <OriginatingIP>string</OriginatingIP>
                <ApplicationVersion>string</ApplicationVersion>
                <SessionToken>string</SessionToken>
                <TransactionToken>string</TransactionToken>
                <DeviceID>string</DeviceID>
                <DeviceType>string</DeviceType>
                <Carrier>string</Carrier>
                <GeoLocation>
                 <Latitude>string</Latitude>
                 <Longitude>string</Longitude>
                </GeoLocation>
                <TransactionSLA>3</TransactionSLA>
               </CommonParms>
               <ForgotPasswordToken>string</ForgotPasswordToken>
               <CardNumber>string</CardNumber>
               <Answers>
                <Answer><!-- between zero and 3 repetitions of this element -->
                 <QuestionID>3</QuestionID>
                 <Answer>string</Answer>
                </Answer>
               </Answers>
              </tns:ValidateVerificationQuestions>
             </soap-env:Body>
            </soap-env:Envelope>
        ValidateVerificationQuestionsOutput:
          type: object
          properties:
            Envelope:
              xml:
                prefix: soap-env
                namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
              type: object
              properties:
                Body:
                  type: object
                  properties:
                    ValidateVerificationQuestionsResponse:
                      $ref: >-
                        #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/ValidateVerificationQuestionsResponse
          example: >-

            <soap-env:Envelope
            xmlns:soap-env="http://schemas.xmlsoap.org/soap/envelope/">
             <soap-env:Body>
              <tns:ValidateVerificationQuestionsResponse xmlns:tns="http://www.manulifebank.com/auth/ws/2.1">
               <Successful>true</Successful>
               <ForgotPasswordToken>string</ForgotPasswordToken>
              </tns:ValidateVerificationQuestionsResponse>
             </soap-env:Body>
            </soap-env:Envelope>
        ValidateVerificationQuestionsHeader:
          type: object
          properties:
            Security:
              $ref: '#/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/Security'
        ValidateVerificationQuestionsFault:
          type: object
          properties:
            Envelope:
              xml:
                prefix: soap-env
                namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
              type: object
              properties:
                Body:
                  type: object
                  properties:
                    Fault:
                      properties:
                        faultcode:
                          type: string
                        faultstring:
                          type: string
                        detail:
                          properties:
                            ErrorInfo:
                              $ref: >-
                                #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/ValidateVerificationQuestionsServiceException
        ResetPasswordInput:
          type: object
          properties:
            Envelope:
              xml:
                prefix: soap-env
                namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
              type: object
              properties:
                Header:
                  $ref: >-
                    #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/ResetPasswordHeader
                Body:
                  type: object
                  properties:
                    ResetPassword:
                      $ref: >-
                        #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/ResetPassword
          example: >-

            <soap-env:Envelope
            xmlns:soap-env="http://schemas.xmlsoap.org/soap/envelope/">
             <soap-env:Header>
              <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
               <UsernameToken>
                <Username>string</Username>
                <Password>string</Password>
               </UsernameToken>
              </wsse:Security>
             </soap-env:Header>
             <soap-env:Body>
              <tns:ResetPassword xmlns:tns="http://www.manulifebank.com/auth/ws/2.1">
               <CommonParms>
                <SourceSystemID>string</SourceSystemID>
                <Application>string</Application>
                <Language>string</Language>
                <OriginatingIP>string</OriginatingIP>
                <ApplicationVersion>string</ApplicationVersion>
                <SessionToken>string</SessionToken>
                <TransactionToken>string</TransactionToken>
                <DeviceID>string</DeviceID>
                <DeviceType>string</DeviceType>
                <Carrier>string</Carrier>
                <GeoLocation>
                 <Latitude>string</Latitude>
                 <Longitude>string</Longitude>
                </GeoLocation>
                <TransactionSLA>3</TransactionSLA>
               </CommonParms>
               <ForgotPasswordToken>string</ForgotPasswordToken>
               <CardNumber>string</CardNumber>
               <NewPassword>string</NewPassword>
              </tns:ResetPassword>
             </soap-env:Body>
            </soap-env:Envelope>
        ResetPasswordOutput:
          type: object
          properties:
            Envelope:
              xml:
                prefix: soap-env
                namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
              type: object
              properties:
                Body:
                  type: object
                  properties:
                    ResetPasswordResponse:
                      $ref: >-
                        #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/ResetPasswordResponse
          example: >-

            <soap-env:Envelope
            xmlns:soap-env="http://schemas.xmlsoap.org/soap/envelope/">
             <soap-env:Body>
              <tns:ResetPasswordResponse xmlns:tns="http://www.manulifebank.com/auth/ws/2.1">
               <Code>string</Code>
               <Message>string</Message>
               <Successful>true</Successful>
              </tns:ResetPasswordResponse>
             </soap-env:Body>
            </soap-env:Envelope>
        ResetPasswordHeader:
          type: object
          properties:
            Security:
              $ref: '#/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/Security'
        ResetPasswordFault:
          type: object
          properties:
            Envelope:
              xml:
                prefix: soap-env
                namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
              type: object
              properties:
                Body:
                  type: object
                  properties:
                    Fault:
                      properties:
                        faultcode:
                          type: string
                        faultstring:
                          type: string
                        detail:
                          properties:
                            ErrorInfo:
                              $ref: >-
                                #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/ResetPasswordServiceException
        GetPasswordResetQuestionsInput:
          type: object
          properties:
            Envelope:
              xml:
                prefix: soap-env
                namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
              type: object
              properties:
                Header:
                  $ref: >-
                    #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/GetPasswordResetQuestionsHeader
                Body:
                  type: object
                  properties:
                    GetPasswordResetQuestions:
                      $ref: >-
                        #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/GetPasswordResetQuestions
          example: >-

            <soap-env:Envelope
            xmlns:soap-env="http://schemas.xmlsoap.org/soap/envelope/">
             <soap-env:Header>
              <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
               <UsernameToken>
                <Username>string</Username>
                <Password>string</Password>
               </UsernameToken>
              </wsse:Security>
             </soap-env:Header>
             <soap-env:Body>
              <tns:GetPasswordResetQuestions xmlns:tns="http://www.manulifebank.com/auth/ws/2.1">
               <CommonParms>
                <SourceSystemID>string</SourceSystemID>
                <Application>string</Application>
                <Language>string</Language>
                <OriginatingIP>string</OriginatingIP>
                <ApplicationVersion>string</ApplicationVersion>
                <SessionToken>string</SessionToken>
                <TransactionToken>string</TransactionToken>
                <DeviceID>string</DeviceID>
                <DeviceType>string</DeviceType>
                <Carrier>string</Carrier>
                <GeoLocation>
                 <Latitude>string</Latitude>
                 <Longitude>string</Longitude>
                </GeoLocation>
                <TransactionSLA>3</TransactionSLA>
               </CommonParms>
               <CardNumber>string</CardNumber>
               <SINSuffix>string</SINSuffix>
               <DateOfBirth>2016-04-18</DateOfBirth>
              </tns:GetPasswordResetQuestions>
             </soap-env:Body>
            </soap-env:Envelope>
        GetPasswordResetQuestionsOutput:
          type: object
          properties:
            Envelope:
              xml:
                prefix: soap-env
                namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
              type: object
              properties:
                Body:
                  type: object
                  properties:
                    GetPasswordResetQuestionsResponse:
                      $ref: >-
                        #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/GetPasswordResetQuestionsResponse
          example: >-

            <soap-env:Envelope
            xmlns:soap-env="http://schemas.xmlsoap.org/soap/envelope/">
             <soap-env:Body>
              <tns:GetPasswordResetQuestionsResponse xmlns:tns="http://www.manulifebank.com/auth/ws/2.1">
               <ForgotPasswordToken>string</ForgotPasswordToken>
               <ValidationErrors>
                <Error><!-- between zero and 20 repetitions of this element -->string</Error>
               </ValidationErrors>
               <Questions>
                <Question><!-- between zero and 3 repetitions of this element -->
                 <QuestionID>3</QuestionID>
                 <QuestionText>string</QuestionText>
                </Question>
               </Questions>
              </tns:GetPasswordResetQuestionsResponse>
             </soap-env:Body>
            </soap-env:Envelope>
        GetPasswordResetQuestionsHeader:
          type: object
          properties:
            Security:
              $ref: '#/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/Security'
        GetPasswordResetQuestionsFault:
          type: object
          properties:
            Envelope:
              xml:
                prefix: soap-env
                namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
              type: object
              properties:
                Body:
                  type: object
                  properties:
                    Fault:
                      properties:
                        faultcode:
                          type: string
                        faultstring:
                          type: string
                        detail:
                          properties:
                            ErrorInfo:
                              $ref: >-
                                #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/GetPasswordResetQuestionServiceException
        GetSecurityQuestionsInput:
          type: object
          properties:
            Envelope:
              xml:
                prefix: soap-env
                namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
              type: object
              properties:
                Header:
                  $ref: >-
                    #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/GetSecurityQuestionsHeader
                Body:
                  type: object
                  properties:
                    GetSecurityQuestions:
                      $ref: >-
                        #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/GetSecurityQuestions
          example: >-

            <soap-env:Envelope
            xmlns:soap-env="http://schemas.xmlsoap.org/soap/envelope/">
             <soap-env:Header>
              <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
               <UsernameToken>
                <Username>string</Username>
                <Password>string</Password>
               </UsernameToken>
              </wsse:Security>
              <bank:AuthenticationHeader xmlns:bank="http://www.manulifebank.com/bankcommon/1.0">
               <AuthenticationToken>string</AuthenticationToken>
               <HOSSOToken><!-- mandatory -->string</HOSSOToken>
              </bank:AuthenticationHeader>
             </soap-env:Header>
             <soap-env:Body>
              <tns:GetSecurityQuestions xmlns:tns="http://www.manulifebank.com/auth/ws/2.1">
               <CommonParms>
                <SourceSystemID>string</SourceSystemID>
                <Application>string</Application>
                <Language>string</Language>
                <OriginatingIP>string</OriginatingIP>
                <ApplicationVersion>string</ApplicationVersion>
                <SessionToken>string</SessionToken>
                <TransactionToken>string</TransactionToken>
                <DeviceID>string</DeviceID>
                <DeviceType>string</DeviceType>
                <Carrier>string</Carrier>
                <GeoLocation>
                 <Latitude>string</Latitude>
                 <Longitude>string</Longitude>
                </GeoLocation>
                <TransactionSLA>3</TransactionSLA>
               </CommonParms>
              </tns:GetSecurityQuestions>
             </soap-env:Body>
            </soap-env:Envelope>
        GetSecurityQuestionsOutput:
          type: object
          properties:
            Envelope:
              xml:
                prefix: soap-env
                namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
              type: object
              properties:
                Body:
                  type: object
                  properties:
                    GetSecurityQuestionsResponse:
                      $ref: >-
                        #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/GetSecurityQuestionsResponse
          example: >-

            <soap-env:Envelope
            xmlns:soap-env="http://schemas.xmlsoap.org/soap/envelope/">
             <soap-env:Body>
              <tns:GetSecurityQuestionsResponse xmlns:tns="http://www.manulifebank.com/auth/ws/2.1">
               <Questions>
                <Question><!-- between zero and 100 repetitions of this element -->
                 <QuestionID>3</QuestionID>
                 <QuestionText>string</QuestionText>
                </Question>
               </Questions>
              </tns:GetSecurityQuestionsResponse>
             </soap-env:Body>
            </soap-env:Envelope>
        GetSecurityQuestionsHeader:
          type: object
          properties:
            AuthenticationHeader:
              $ref: >-
                #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/AuthenticationHeader
            Security:
              $ref: '#/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/Security'
        GetSecurityQuestionsFault:
          type: object
          properties:
            Envelope:
              xml:
                prefix: soap-env
                namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
              type: object
              properties:
                Body:
                  type: object
                  properties:
                    Fault:
                      properties:
                        faultcode:
                          type: string
                        faultstring:
                          type: string
                        detail:
                          properties:
                            ErrorInfo:
                              $ref: >-
                                #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/GetSecurityQuestionsException
        RegisterSecurityQuestionsInput:
          type: object
          properties:
            Envelope:
              xml:
                prefix: soap-env
                namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
              type: object
              properties:
                Header:
                  $ref: >-
                    #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/RegisterSecurityQuestionsHeader
                Body:
                  type: object
                  properties:
                    RegisterSecurityQuestions:
                      $ref: >-
                        #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/RegisterSecurityQuestions
          example: >-

            <soap-env:Envelope
            xmlns:soap-env="http://schemas.xmlsoap.org/soap/envelope/">
             <soap-env:Header>
              <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
               <UsernameToken>
                <Username>string</Username>
                <Password>string</Password>
               </UsernameToken>
              </wsse:Security>
              <bank:AuthenticationHeader xmlns:bank="http://www.manulifebank.com/bankcommon/1.0">
               <AuthenticationToken>string</AuthenticationToken>
               <HOSSOToken><!-- mandatory -->string</HOSSOToken>
              </bank:AuthenticationHeader>
             </soap-env:Header>
             <soap-env:Body>
              <tns:RegisterSecurityQuestions xmlns:tns="http://www.manulifebank.com/auth/ws/2.1">
               <CommonParms>
                <SourceSystemID>string</SourceSystemID>
                <Application>string</Application>
                <Language>string</Language>
                <OriginatingIP>string</OriginatingIP>
                <ApplicationVersion>string</ApplicationVersion>
                <SessionToken>string</SessionToken>
                <TransactionToken>string</TransactionToken>
                <DeviceID>string</DeviceID>
                <DeviceType>string</DeviceType>
                <Carrier>string</Carrier>
                <GeoLocation>
                 <Latitude>string</Latitude>
                 <Longitude>string</Longitude>
                </GeoLocation>
                <TransactionSLA>3</TransactionSLA>
               </CommonParms>
               <CardNumber>string</CardNumber>
               <Answer><!-- mandatory --><!-- between 3 and 3 repetitions of this element -->
                <QuestionID>3</QuestionID>
                <Answer>string</Answer>
               </Answer>
              </tns:RegisterSecurityQuestions>
             </soap-env:Body>
            </soap-env:Envelope>
        RegisterSecurityQuestionsOutput:
          type: object
          properties:
            Envelope:
              xml:
                prefix: soap-env
                namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
              type: object
              properties:
                Body:
                  type: object
                  properties:
                    RegisterSecurityQuestionsResponse:
                      $ref: >-
                        #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/RegisterSecurityQuestionsResponse
          example: >-

            <soap-env:Envelope
            xmlns:soap-env="http://schemas.xmlsoap.org/soap/envelope/">
             <soap-env:Body>
              <tns:RegisterSecurityQuestions xmlns:tns="http://www.manulifebank.com/auth/ws/2.1">
               <CommonParms>
                <SourceSystemID>string</SourceSystemID>
                <Application>string</Application>
                <Language>string</Language>
                <OriginatingIP>string</OriginatingIP>
                <ApplicationVersion>string</ApplicationVersion>
                <SessionToken>string</SessionToken>
                <TransactionToken>string</TransactionToken>
                <DeviceID>string</DeviceID>
                <DeviceType>string</DeviceType>
                <Carrier>string</Carrier>
                <GeoLocation>
                 <Latitude>string</Latitude>
                 <Longitude>string</Longitude>
                </GeoLocation>
                <TransactionSLA>3</TransactionSLA>
               </CommonParms>
               <CardNumber>string</CardNumber>
               <Answer><!-- mandatory --><!-- between 3 and 3 repetitions of this element -->
                <QuestionID>3</QuestionID>
                <Answer>string</Answer>
               </Answer>
              </tns:RegisterSecurityQuestions>
             </soap-env:Body>
            </soap-env:Envelope>
        RegisterSecurityQuestionsHeader:
          type: object
          properties:
            AuthenticationHeader:
              $ref: >-
                #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/AuthenticationHeader
            Security:
              $ref: '#/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/Security'
        RegisterSecurityQuestionsFault:
          type: object
          properties:
            Envelope:
              xml:
                prefix: soap-env
                namespace: 'http://schemas.xmlsoap.org/soap/envelope/'
              type: object
              properties:
                Body:
                  type: object
                  properties:
                    Fault:
                      properties:
                        faultcode:
                          type: string
                        faultstring:
                          type: string
                        detail:
                          properties:
                            ErrorInfo:
                              $ref: >-
                                #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/RegisterSecurityQuestionException
        Authenticate:
          xml:
            namespace: 'http://www.manulifebank.com/auth/ws/2.1'
            prefix: tns
          type: object
          properties:
            CommonParms:
              $ref: >-
                #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/CommonParms
            CardNumber:
              $ref: >-
                #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/AccessNumber
            Password:
              type: string
              description: >-
                Password associated with the access number (optional for certain
                operations).
              xml:
                namespace: ''
            BankSSOToken:
              type: string
              description: "A Single Sign On Token that is used to allow a user that has already been \r\n\t\t\t\t\t\tauthenticated by Client Site to log directly into bank services without entering their credentials again."
              xml:
                namespace: ''
            AuthenticationSessionToken:
              type: string
              description: "A token generated by a previous call to \"authenticate\", returning\r\n\t\t\t\t\t\ta Fraud Detection \"QUERY\" result."
              xml:
                namespace: ''
            Answer:
              $ref: >-
                #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/AnswerVerificationEntry
            AnswerPrevAttempts:
              xml:
                namespace: ''
                prefix: ''
              type: integer
              format: int32
              minimum: 0
              description: "If this authentication request is made following a login challenge: contains the number of previous answering attempts\r\n\t\t\t\t\t\t\tmade."
          description: >-
            CardNumber: Access number of the customer that this request is for.;

            Answer: If this authentication request is made following a login
            challenge: contains the verification answer.
          example: >-

            <tns:Authenticate
            xmlns:tns="http://www.manulifebank.com/auth/ws/2.1"
            xmlns:bank="http://www.manulifebank.com/bankcommon/1.0">
             <CommonParms>
              <SourceSystemID>string</SourceSystemID>
              <Application>string</Application>
              <Language>string</Language>
              <OriginatingIP>string</OriginatingIP>
              <ApplicationVersion>string</ApplicationVersion>
              <SessionToken>string</SessionToken>
              <TransactionToken>string</TransactionToken>
              <DeviceID>string</DeviceID>
              <DeviceType>string</DeviceType>
              <Carrier>string</Carrier>
              <GeoLocation>
               <Latitude>string</Latitude>
               <Longitude>string</Longitude>
              </GeoLocation>
              <TransactionSLA>3</TransactionSLA>
             </CommonParms>
             <CardNumber>string</CardNumber>
             <Password>string</Password>
             <BankSSOToken>string</BankSSOToken>
             <AuthenticationSessionToken>string</AuthenticationSessionToken>
             <Answer>
              <QuestionID>3</QuestionID>
              <Answer>string</Answer>
             </Answer>
             <AnswerPrevAttempts>3</AnswerPrevAttempts>
            </tns:Authenticate>
        AuthenticateResponse:
          xml:
            namespace: 'http://www.manulifebank.com/auth/ws/2.1'
            prefix: tns
          type: object
          properties:
            Code:
              $ref: >-
                #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/AuthenticationErrorCode
            AuthenticationToken:
              type: string
              description: Authentication token to use for subsequent calls.
              xml:
                namespace: ''
            AuthenticationSessionToken:
              type: string
              description: "Generated if the Fraud Detection system returns \"QUERY\". This\r\n\t\t\t\t\t\ttoken must be submitted to subsequent calls to \"authenticate\"."
              xml:
                namespace: ''
            ChangePassword:
              type: boolean
              description: '"true" if password change required, "false" otherwise.'
              xml:
                namespace: ''
            SecureAction:
              $ref: >-
                #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/SecureActionEnum
            Registered:
              type: boolean
              description: >-
                Indication whether the user has already been registered to the
                fraud detection system.
              xml:
                namespace: ''
            AllowedToApplyForNewProducts:
              type: boolean
              description: "Indication whether the user should be allowed to apply for a new product through\r\n\t\t\t\t\t\tthe Deposit Origination application \"DOT\"."
              xml:
                namespace: ''
            SecurityQuestion:
              $ref: >-
                #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/VerificationQuestionDetails
            CustomerDetails:
              $ref: >-
                #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/CustomerDetails
          description: >-
            Code: Authentication Error code (optional).;

            SecureAction: Indication whether the user should be allowed in,
            denied, or prompted for security question(s).;

            SecurityQuestion: Only returned if a security question needs to be
            answered.;

            CustomerDetails: For a successful authentication call, this will
            contain the customer's profile.
          example: >-

            <tns:AuthenticateResponse
            xmlns:tns="http://www.manulifebank.com/auth/ws/2.1"
            xmlns:client="http://www.manulifebank.com/client/1.0">
             <Code>string</Code>
             <AuthenticationToken>string</AuthenticationToken>
             <AuthenticationSessionToken>string</AuthenticationSessionToken>
             <ChangePassword>true</ChangePassword>
             <SecureAction>string</SecureAction>
             <Registered>true</Registered>
             <AllowedToApplyForNewProducts>true</AllowedToApplyForNewProducts>
             <SecurityQuestion>
              <QuestionID>3</QuestionID>
              <QuestionText>string</QuestionText>
             </SecurityQuestion>
             <CustomerDetails>
              <FirstName>string</FirstName>
              <LastName>string</LastName>
              <PreferredLanguage>string</PreferredLanguage>
              <Status>string</Status>
              <Sin>string</Sin>
              <BirthDate>2016-04-18</BirthDate>
              <Address>
               <AddressLine1>string</AddressLine1>
               <AddressLine2>string</AddressLine2>
               <AddressLine3>string</AddressLine3>
               <City>string</City>
               <Province>string</Province>
               <PostalCode>string</PostalCode>
               <Country>string</Country>
              </Address>
              <Contact>
               <HomePhone>string</HomePhone>
               <CellPhone>string</CellPhone>
               <WorkPhone>string</WorkPhone>
               <WorkPhoneExt>string</WorkPhoneExt>
               <Email>string</Email>
              </Contact>
              <PoliticalExposure>
               <CurrentExposure>true</CurrentExposure>
               <EffectiveDate>2016-04-18</EffectiveDate>
              </PoliticalExposure>
              <IndustrySector>string</IndustrySector>
              <Occupation>string</Occupation>
              <EmployerName>string</EmployerName>
              <CustomerIdentities>
               <CustomerIdentity><!-- between zero and unlimited repetitions of this element -->
                <Type>string</Type>
                <Sequence>string</Sequence>
                <Description>string</Description>
                <Required>string</Required>
                <DueDate>2016-04-18</DueDate>
                <ModifiedDate>2016-04-18</ModifiedDate>
                <Number>string</Number>
                <IssuedBy>string</IssuedBy>
                <ExpiryDate>2016-04-18</ExpiryDate>
               </CustomerIdentity>
              </CustomerIdentities>
             </CustomerDetails>
            </tns:AuthenticateResponse>
        AuthenticationServiceException:
          xml:
            namespace: 'http://www.manulifebank.com/auth/ws/2.1'
            prefix: tns
          type: object
          properties:
            Code:
              $ref: >-
                #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/AuthenticationErrorCode
            Message:
              type: string
              description: 'Associated message, if unsuccessful.'
          description: 'Code: Error code (optional).'
          example: >-

            <tns:AuthenticationServiceException
            xmlns:tns="http://www.manulifebank.com/auth/ws/2.1">
             <Code>string</Code>
             <Message>string</Message>
            </tns:AuthenticationServiceException>
        ChangePassword:
          xml:
            namespace: 'http://www.manulifebank.com/auth/ws/2.1'
            prefix: tns
          type: object
          properties:
            CommonParms:
              $ref: >-
                #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/CommonParms
            Password:
              type: string
              description: Password associated with the card number.
              xml:
                namespace: ''
            NewPassword:
              type: string
              description: The new password.
              xml:
                namespace: ''
          example: >-

            <tns:ChangePassword
            xmlns:tns="http://www.manulifebank.com/auth/ws/2.1"
            xmlns:bank="http://www.manulifebank.com/bankcommon/1.0">
             <CommonParms>
              <SourceSystemID>string</SourceSystemID>
              <Application>string</Application>
              <Language>string</Language>
              <OriginatingIP>string</OriginatingIP>
              <ApplicationVersion>string</ApplicationVersion>
              <SessionToken>string</SessionToken>
              <TransactionToken>string</TransactionToken>
              <DeviceID>string</DeviceID>
              <DeviceType>string</DeviceType>
              <Carrier>string</Carrier>
              <GeoLocation>
               <Latitude>string</Latitude>
               <Longitude>string</Longitude>
              </GeoLocation>
              <TransactionSLA>3</TransactionSLA>
             </CommonParms>
             <Password>string</Password>
             <NewPassword>string</NewPassword>
            </tns:ChangePassword>
        ChangePasswordResponse:
          xml:
            namespace: 'http://www.manulifebank.com/auth/ws/2.1'
            prefix: tns
          allOf:
            - $ref: >-
                #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/GenericFeedback
            - xml:
                namespace: 'http://www.manulifebank.com/bankcommon/1.0'
                prefix: bank
              type: object
              properties:
                Successful:
                  type: boolean
                  description: Success indication.
          example: >-

            <tns:ChangePasswordResponse
            xmlns:bank="http://www.manulifebank.com/bankcommon/1.0">
             <Code>string</Code>
             <Message>string</Message>
             <Successful>true</Successful>
            </tns:ChangePasswordResponse>
        ChangePasswordServiceException:
          xml:
            namespace: 'http://www.manulifebank.com/auth/ws/2.1'
            prefix: tns
          type: object
          properties:
            Code:
              $ref: >-
                #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/ChangePasswordErrorCode
            Message:
              type: string
              description: 'Associated message, if unsuccessful.'
          description: 'Code: Error code (optional).'
          example: >-

            <tns:ChangePasswordServiceException
            xmlns:tns="http://www.manulifebank.com/auth/ws/2.1">
             <Code>string</Code>
             <Message>string</Message>
            </tns:ChangePasswordServiceException>
        ValidateVerificationQuestions:
          xml:
            namespace: 'http://www.manulifebank.com/auth/ws/2.1'
            prefix: tns
          type: object
          properties:
            CommonParms:
              $ref: >-
                #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/CommonParms
            ForgotPasswordToken:
              type: string
              xml:
                namespace: ''
            CardNumber:
              $ref: >-
                #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/AccessNumber
            Answers:
              xml:
                namespace: ''
                prefix: ''
              type: object
              properties:
                Answer:
                  type: array
                  items:
                    $ref: >-
                      #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/AnswerVerificationEntry
                  maxItems: 3
              description: Collection of answers.
          example: >-

            <tns:ValidateVerificationQuestions
            xmlns:tns="http://www.manulifebank.com/auth/ws/2.1"
            xmlns:bank="http://www.manulifebank.com/bankcommon/1.0">
             <CommonParms>
              <SourceSystemID>string</SourceSystemID>
              <Application>string</Application>
              <Language>string</Language>
              <OriginatingIP>string</OriginatingIP>
              <ApplicationVersion>string</ApplicationVersion>
              <SessionToken>string</SessionToken>
              <TransactionToken>string</TransactionToken>
              <DeviceID>string</DeviceID>
              <DeviceType>string</DeviceType>
              <Carrier>string</Carrier>
              <GeoLocation>
               <Latitude>string</Latitude>
               <Longitude>string</Longitude>
              </GeoLocation>
              <TransactionSLA>3</TransactionSLA>
             </CommonParms>
             <ForgotPasswordToken>string</ForgotPasswordToken>
             <CardNumber>string</CardNumber>
             <Answers>
              <Answer><!-- between zero and 3 repetitions of this element -->
               <QuestionID>3</QuestionID>
               <Answer>string</Answer>
              </Answer>
             </Answers>
            </tns:ValidateVerificationQuestions>
        ValidateVerificationQuestionsResponse:
          xml:
            namespace: 'http://www.manulifebank.com/auth/ws/2.1'
            prefix: tns
          type: object
          properties:
            Successful:
              type: boolean
              description: >-
                Success indicator. As per the operation's design, this value
                will always be "true".
              xml:
                namespace: ''
            ForgotPasswordToken:
              type: string
              xml:
                namespace: ''
          example: >-

            <tns:ValidateVerificationQuestionsResponse
            xmlns:tns="http://www.manulifebank.com/auth/ws/2.1">
             <Successful>true</Successful>
             <ForgotPasswordToken>string</ForgotPasswordToken>
            </tns:ValidateVerificationQuestionsResponse>
        ValidateVerificationQuestionsServiceException:
          xml:
            namespace: 'http://www.manulifebank.com/auth/ws/2.1'
            prefix: tns
          type: object
          properties:
            Code:
              $ref: >-
                #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/ValidateVerificationQuestionsErrorCode
            Message:
              type: string
              description: 'Associated message, if unsuccessful.'
          description: 'Code: Error code (optional).'
          example: >-

            <tns:ValidateVerificationQuestionsServiceException
            xmlns:tns="http://www.manulifebank.com/auth/ws/2.1">
             <Code>string</Code>
             <Message>string</Message>
            </tns:ValidateVerificationQuestionsServiceException>
        ResetPassword:
          xml:
            namespace: 'http://www.manulifebank.com/auth/ws/2.1'
            prefix: tns
          type: object
          properties:
            CommonParms:
              $ref: >-
                #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/CommonParms
            ForgotPasswordToken:
              type: string
              xml:
                namespace: ''
            CardNumber:
              $ref: >-
                #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/AccessNumber
            NewPassword:
              type: string
              description: The new password to set.
              xml:
                namespace: ''
          example: >-

            <tns:ResetPassword
            xmlns:tns="http://www.manulifebank.com/auth/ws/2.1"
            xmlns:bank="http://www.manulifebank.com/bankcommon/1.0">
             <CommonParms>
              <SourceSystemID>string</SourceSystemID>
              <Application>string</Application>
              <Language>string</Language>
              <OriginatingIP>string</OriginatingIP>
              <ApplicationVersion>string</ApplicationVersion>
              <SessionToken>string</SessionToken>
              <TransactionToken>string</TransactionToken>
              <DeviceID>string</DeviceID>
              <DeviceType>string</DeviceType>
              <Carrier>string</Carrier>
              <GeoLocation>
               <Latitude>string</Latitude>
               <Longitude>string</Longitude>
              </GeoLocation>
              <TransactionSLA>3</TransactionSLA>
             </CommonParms>
             <ForgotPasswordToken>string</ForgotPasswordToken>
             <CardNumber>string</CardNumber>
             <NewPassword>string</NewPassword>
            </tns:ResetPassword>
        ResetPasswordResponse:
          xml:
            namespace: 'http://www.manulifebank.com/auth/ws/2.1'
            prefix: tns
          allOf:
            - $ref: >-
                #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/GenericFeedback
            - xml:
                namespace: 'http://www.manulifebank.com/bankcommon/1.0'
                prefix: bank
              type: object
              properties:
                Successful:
                  type: boolean
                  description: Success indication.
          example: >-

            <tns:ResetPasswordResponse
            xmlns:bank="http://www.manulifebank.com/bankcommon/1.0">
             <Code>string</Code>
             <Message>string</Message>
             <Successful>true</Successful>
            </tns:ResetPasswordResponse>
        ResetPasswordServiceException:
          xml:
            namespace: 'http://www.manulifebank.com/auth/ws/2.1'
            prefix: tns
          type: object
          properties:
            Code:
              $ref: >-
                #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/ResetPasswordErrorCode
            Message:
              type: string
              description: 'Associated message, if unsuccessful.'
          description: 'Code: Error code (optional).'
          example: >-

            <tns:ResetPasswordServiceException
            xmlns:tns="http://www.manulifebank.com/auth/ws/2.1">
             <Code>string</Code>
             <Message>string</Message>
            </tns:ResetPasswordServiceException>
        GetPasswordResetQuestions:
          xml:
            namespace: 'http://www.manulifebank.com/auth/ws/2.1'
            prefix: tns
          type: object
          properties:
            CommonParms:
              $ref: >-
                #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/CommonParms
            CardNumber:
              $ref: >-
                #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/AccessNumber
            SINSuffix:
              xml:
                namespace: ''
                prefix: ''
              type: string
              maxLength: 4
              minLength: 4
              description: Last four digits of the SIN number.
            DateOfBirth:
              type: string
              format: date
              description: Card holder's date of birth.
              xml:
                namespace: ''
          description: 'CardNumber: The card number.'
          example: >-

            <tns:GetPasswordResetQuestions
            xmlns:tns="http://www.manulifebank.com/auth/ws/2.1"
            xmlns:bank="http://www.manulifebank.com/bankcommon/1.0">
             <CommonParms>
              <SourceSystemID>string</SourceSystemID>
              <Application>string</Application>
              <Language>string</Language>
              <OriginatingIP>string</OriginatingIP>
              <ApplicationVersion>string</ApplicationVersion>
              <SessionToken>string</SessionToken>
              <TransactionToken>string</TransactionToken>
              <DeviceID>string</DeviceID>
              <DeviceType>string</DeviceType>
              <Carrier>string</Carrier>
              <GeoLocation>
               <Latitude>string</Latitude>
               <Longitude>string</Longitude>
              </GeoLocation>
              <TransactionSLA>3</TransactionSLA>
             </CommonParms>
             <CardNumber>string</CardNumber>
             <SINSuffix>string</SINSuffix>
             <DateOfBirth>2016-04-18</DateOfBirth>
            </tns:GetPasswordResetQuestions>
        GetPasswordResetQuestionsResponse:
          xml:
            namespace: 'http://www.manulifebank.com/auth/ws/2.1'
            prefix: tns
          type: object
          properties:
            ForgotPasswordToken:
              type: string
              xml:
                namespace: ''
            ValidationErrors:
              xml:
                namespace: ''
                prefix: ''
              type: object
              properties:
                Error:
                  type: array
                  items:
                    $ref: >-
                      #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/PasswordResetValidationError
                  maxItems: 20
              description: "If not empty: contains a list of validation errors.\r\n\t\t\t\t\t\t\tIf empty: operation successful, questions were returned."
            Questions:
              xml:
                namespace: ''
                prefix: ''
              type: object
              properties:
                Question:
                  type: array
                  items:
                    $ref: >-
                      #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/VerificationQuestionDetails
                  maxItems: 3
              description: >-
                List of verification questions. Only returned if there's no
                validation errors.
          example: >-

            <tns:GetPasswordResetQuestionsResponse
            xmlns:tns="http://www.manulifebank.com/auth/ws/2.1">
             <ForgotPasswordToken>string</ForgotPasswordToken>
             <ValidationErrors>
              <Error><!-- between zero and 20 repetitions of this element -->string</Error>
             </ValidationErrors>
             <Questions>
              <Question><!-- between zero and 3 repetitions of this element -->
               <QuestionID>3</QuestionID>
               <QuestionText>string</QuestionText>
              </Question>
             </Questions>
            </tns:GetPasswordResetQuestionsResponse>
        GetPasswordResetQuestionServiceException:
          xml:
            namespace: 'http://www.manulifebank.com/auth/ws/2.1'
            prefix: tns
          type: object
          properties:
            Code:
              $ref: >-
                #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/GetPasswordResetQuestionsErrorCode
            Message:
              type: string
              description: 'Associated message, if unsuccessful.'
          description: 'Code: Error code (optional).'
          example: >-

            <tns:GetPasswordResetQuestionServiceException
            xmlns:tns="http://www.manulifebank.com/auth/ws/2.1">
             <Code>string</Code>
             <Message>string</Message>
            </tns:GetPasswordResetQuestionServiceException>
        GetSecurityQuestions:
          xml:
            namespace: 'http://www.manulifebank.com/auth/ws/2.1'
            prefix: tns
          type: object
          properties:
            CommonParms:
              $ref: >-
                #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/CommonParms
          example: >-

            <tns:GetSecurityQuestions
            xmlns:tns="http://www.manulifebank.com/auth/ws/2.1"
            xmlns:bank="http://www.manulifebank.com/bankcommon/1.0">
             <CommonParms>
              <SourceSystemID>string</SourceSystemID>
              <Application>string</Application>
              <Language>string</Language>
              <OriginatingIP>string</OriginatingIP>
              <ApplicationVersion>string</ApplicationVersion>
              <SessionToken>string</SessionToken>
              <TransactionToken>string</TransactionToken>
              <DeviceID>string</DeviceID>
              <DeviceType>string</DeviceType>
              <Carrier>string</Carrier>
              <GeoLocation>
               <Latitude>string</Latitude>
               <Longitude>string</Longitude>
              </GeoLocation>
              <TransactionSLA>3</TransactionSLA>
             </CommonParms>
            </tns:GetSecurityQuestions>
        GetSecurityQuestionsResponse:
          xml:
            namespace: 'http://www.manulifebank.com/auth/ws/2.1'
            prefix: tns
          type: object
          properties:
            Questions:
              $ref: >-
                #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/SecurityQuestions
          example: >-

            <tns:GetSecurityQuestionsResponse
            xmlns:tns="http://www.manulifebank.com/auth/ws/2.1">
             <Questions>
              <Question><!-- between zero and 100 repetitions of this element -->
               <QuestionID>3</QuestionID>
               <QuestionText>string</QuestionText>
              </Question>
             </Questions>
            </tns:GetSecurityQuestionsResponse>            
        GetSecurityQuestionsException:
          xml:
            namespace: 'http://www.manulifebank.com/auth/ws/2.1'
            prefix: tns
          type: object
          properties:
            Code:
              $ref: >-
                #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/GenericFeedbackCode
            Message:
              type: string
              description: 'Associated message, if unsuccessful.'
          description: 'Code: Error code (optional).'
          example: >-

            <tns:GetSecurityQuestionsException
            xmlns:tns="http://www.manulifebank.com/auth/ws/2.1">
             <Code>string</Code>
             <Message>string</Message>
            </tns:GetSecurityQuestionsException>
        RegisterSecurityQuestions:
          xml:
            namespace: 'http://www.manulifebank.com/auth/ws/2.1'
            prefix: tns
          type: object
          properties:
            CommonParms:
              $ref: >-
                #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/CommonParms
            CardNumber:
              $ref: >-
                #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/CardNumber
            Answer:
              xml:
                prefix: ''
                namespace: ''
              type: array
              items:
                $ref: >-
                  #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/AnswerVerificationEntry
              maxItems: 3
              minItems: 3
          description: >-
            CardNumber: Card number of the customer that this request is for.;

            Answer: Register 3 security questions and their answers in the
            backend.
          required:
            - Answer
          example: >-

            <tns:RegisterSecurityQuestions
            xmlns:tns="http://www.manulifebank.com/auth/ws/2.1"
            xmlns:bank="http://www.manulifebank.com/bankcommon/1.0">
             <CommonParms>
              <SourceSystemID>string</SourceSystemID>
              <Application>string</Application>
              <Language>string</Language>
              <OriginatingIP>string</OriginatingIP>
              <ApplicationVersion>string</ApplicationVersion>
              <SessionToken>string</SessionToken>
              <TransactionToken>string</TransactionToken>
              <DeviceID>string</DeviceID>
              <DeviceType>string</DeviceType>
              <Carrier>string</Carrier>
              <GeoLocation>
               <Latitude>string</Latitude>
               <Longitude>string</Longitude>
              </GeoLocation>
              <TransactionSLA>3</TransactionSLA>
             </CommonParms>
             <CardNumber>string</CardNumber>
             <Answer><!-- mandatory --><!-- between 3 and 3 repetitions of this element -->
              <QuestionID>3</QuestionID>
              <Answer>string</Answer>
             </Answer>
            </tns:RegisterSecurityQuestions>
        RegisterSecurityQuestionsResponse:
          xml:
            namespace: 'http://www.manulifebank.com/auth/ws/2.1'
            prefix: tns
          type: object
          properties:
            Successful:
              type: boolean
              description: Success indicator.
              xml:
                namespace: ''
            Code:
              $ref: >-
                #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/RegisterSecurityQuestionErrorCode
            Message:
              type: string
              description: 'Associated message, if unsuccessful.'
              xml:
                namespace: ''
          description: 'Code: Feedback code (optional).'
          example: >-

            <tns:RegisterSecurityQuestionsResponse
            xmlns:tns="http://www.manulifebank.com/auth/ws/2.1">
             <Successful>true</Successful>
             <Code>string</Code>
             <Message>string</Message>
            </tns:RegisterSecurityQuestionsResponse>            
        RegisterSecurityQuestionException:
          xml:
            namespace: 'http://www.manulifebank.com/auth/ws/2.1'
            prefix: tns
          type: object
          properties:
            Code:
              $ref: >-
                #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/RegisterSecurityQuestionErrorCode
            Message:
              type: string
              description: 'Associated message, if unsuccessful.'
          description: 'Code: Error code (optional).'
          example: >-

            <tns:RegisterSecurityQuestionException
            xmlns:tns="http://www.manulifebank.com/auth/ws/2.1">
             <Code>string</Code>
             <Message>string</Message>
            </tns:RegisterSecurityQuestionException>            
        AuthenticationHeader:
          xml:
            namespace: 'http://www.manulifebank.com/bankcommon/1.0'
            prefix: tns
          type: object
          properties:
            AuthenticationToken:
              xml:
                namespace: ''
                prefix: ''
              type: string
            HOSSOToken:
              type: string
        CommonParms:
          xml:
            namespace: ''
            prefix: ''
          type: object
          properties:
            SourceSystemID:
              $ref: >-
                #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/SourceSystemIDEnum
            Application:
              $ref: >-
                #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/ApplicationIdType
            Language:
              $ref: '#/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/Language'
            OriginatingIP:
              $ref: >-
                #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/NonEmptyString
            ApplicationVersion:
              type: string
              description: The version of the application that is making the service call.
            SessionToken:
              type: string
              description: >-
                Used to correlate application logs across various infrastructure
                for a user's session.
            TransactionToken:
              type: string
              description: >-
                Used to correlate application logs across infrastructure for a
                given transaction.
            DeviceID:
              type: string
              description: >-
                The Device Id of the mobile application. This is a Worklight
                Generated ID, not the mobile device UID
            DeviceType:
              type: string
              description: The Device Type the mobile application is running on.
            Carrier:
              type: string
              description: 'The Carrier the mobile device is connected to. Eg. Rogers,Bell'
            GeoLocation:
              $ref: >-
                #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/GeoLocation
            TransactionSLA:
              type: integer
              format: int32
              description: "The number of milliseconds a transaction is expected to complete in. The default is \r\n\t\t\t\t\t15000 ms (15 seconds). This value will be used in money movement transactions such as Bill Payments,\r\n\t\t\t\t\tFund Transfers, Interac Send Money, and Mobile Deposit Capture.  There are 2 possible confirmation ids that\r\n\t\t\t\t\tcan be returned. There is the 'We received your request', and 'We have succesfully processed your request'. \r\n\t\t\t\t\tIf the SLA is set too low you will see more of the first."
          description: "Common parameters that have to be specified in each and every call.\r\n\t\t\t\tThese parameters may be affected by the ongoing discussions\r\n\t\t\t\tabout stateless/stateful implementations.;\nSourceSystemID: Identification of the source system.;\nApplication: Free-form field to identify the device type, or application type, making the call.\r\n\t\t\t\t\t\tThe semantics of this field are TBD at this point.;\nLanguage: The language to use when obtaining textual data (such as error messages).;\nOriginatingIP: The IP address where this request is being sent from.;\nGeoLocation: Current Device location"
        AccessNumber:
          xml:
            namespace: ''
            prefix: ''
          type: string
          description: 'Custom type for an access number: exactly 9 digits long.'
          pattern: '[0-9]+'
          minLength: 9
          maxLength: 9
        AnswerVerificationEntry:
          xml:
            namespace: ''
            prefix: ''
          type: object
          properties:
            QuestionID:
              type: integer
              format: int32
              description: Unique ID of the question.
            Answer:
              type: string
              description: Answer to the question.
          description: A holder structure for a question ID and its respective answer.
        AuthenticationErrorCode:
          xml:
            namespace: ''
            prefix: ''
          type: string
          description: Possible feedback codes.
          enum:
            - IncorrectAnswer
            - GeneralError
            - InvalidAuthenticationToken
            - InvalidAuthenticationSessionToken
            - IncorrectAuthenticationCredentials
            - AuthenticationAttemptsExceeded
            - AuthenticationStatusCodeInvalid
            - IncorrectAnswerVerification
        SecureActionEnum:
          xml:
            namespace: ''
            prefix: ''
          type: string
          description: "Returned by the underlying fraud detection framework, to determine whether\r\n\t\t\t\tthe user should allow further access to the system.\r\n\t\t\t\tValues must correspond to values from the SecureActionResult class."
          enum:
            - Allow
            - Query
            - Deny
        VerificationQuestionDetails:
          xml:
            namespace: ''
            prefix: ''
          type: object
          properties:
            QuestionID:
              type: integer
              format: int32
              description: Question's ID.
            QuestionText:
              type: string
              description: Question's text.
        CustomerDetails:
          xml:
            namespace: ''
            prefix: ''
          type: object
          properties:
            FirstName:
              type: string
              description: Customer's first name.
            LastName:
              type: string
              description: Customer's last name.
            PreferredLanguage:
              $ref: '#/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/Language'
            Status:
              $ref: >-
                #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/CustomerStatusEnum
            Sin:
              type: string
              description: Customer's SIN Number.
            BirthDate:
              type: string
              format: date
              description: Customer's date of birth.
            Address:
              $ref: >-
                #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/CustomerAddress
            Contact:
              $ref: >-
                #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/CustomerContact
            PoliticalExposure:
              $ref: >-
                #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/PoliticalExposure
            IndustrySector:
              type: string
              description: Customer's industry sector.
            Occupation:
              type: string
              description: Customer's occupation.
            EmployerName:
              type: string
              description: Customer's employer name.
            CustomerIdentities:
              $ref: >-
                #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/CustIdentInformation
          description: >-
            Holder for customer profile information.;

            PreferredLanguage: Customer's preferred language.;

            Status: Customer's status.;

            Address: Customer's address Information.;

            Contact: Customer contact information.;

            PoliticalExposure: for Political Exposure, this will contain the
            PoliticalExposure's profile. True if there is political exposure.;

            CustomerIdentities: Customer's Indentification info.
        GenericFeedback:
          xml:
            namespace: ''
            prefix: ''
          type: object
          properties:
            Code:
              $ref: >-
                #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/GenericFeedbackCode
            Message:
              type: string
              description: 'Associated message, if unsuccessful.'
          description: 'Code: Feedback code (optional).'
        ChangePasswordErrorCode:
          xml:
            namespace: ''
            prefix: ''
          type: string
          description: Possible feedback codes.
          enum:
            - GeneralError
            - InvalidAuthenticationToken
            - IncorrectAuthenticationCredentials
            - NewPasswordInvalid
            - NewPasswordSameAsOldPassword
        ValidateVerificationQuestionsErrorCode:
          xml:
            namespace: ''
            prefix: ''
          type: string
          description: Possible feedback codes.
          enum:
            - GeneralError
            - InvalidAuthenticationToken
            - InvalidForgotPasswordToken
            - IncorrectAnswerVerification
        ResetPasswordErrorCode:
          xml:
            namespace: ''
            prefix: ''
          type: string
          description: Possible feedback codes.
          enum:
            - GeneralError
            - InvalidAuthenticationToken
            - InvalidForgotPasswordToken
            - NewPasswordInvalid
            - NewPasswordSameAsOldPassword
        PasswordResetValidationError:
          xml:
            namespace: ''
            prefix: ''
          type: string
          description: Contains validation code returned from "GetPasswordResetQuestions".
          enum:
            - IncorrectValidationInfo
            - ExceededAttempts
            - UnknownError
        GetPasswordResetQuestionsErrorCode:
          xml:
            namespace: ''
            prefix: ''
          type: string
          description: Possible feedback codes.
          enum:
            - GeneralError
        CardNumber:
          xml:
            namespace: ''
            prefix: ''
          type: string
          description: 'Custom type for a card number: exactly 9 digits long.'
          pattern: '[0-9]+'
          minLength: 9
          maxLength: 9
        RegisterSecurityQuestionErrorCode:
          xml:
            namespace: ''
            prefix: ''
          type: string
          description: Possible feedback codes.
          enum:
            - GeneralError
            - UpdateFailed
        SourceSystemIDEnum:
          xml:
            namespace: ''
            prefix: ''
          type: string
          description: A code identifying the system that originated the request.
          enum:
            - ClientMobile
            - CUSTMEED
        ApplicationIdType:
          $ref: >-
            #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/NonEmptyString
        Language:
          xml:
            namespace: ''
            prefix: ''
          type: string
          description: Enumeration for languages.
          enum:
            - en
            - fr
        NonEmptyString:
          xml:
            namespace: ''
            prefix: ''
          type: string
          description: Generic type for a non-empty string.
          minLength: 1
        GeoLocation:
          xml:
            namespace: ''
            prefix: ''
          type: object
          properties:
            Latitude:
              type: string
            Longitude:
              type: string
          description: A geographic location.
        CustomerStatusEnum:
          xml:
            namespace: ''
            prefix: ''
          type: string
          description: Possible customer status values.
          enum:
            - A
            - I
            - D
            - UNKNOWN
        CustomerAddress:
          xml:
            namespace: ''
            prefix: ''
          type: object
          properties:
            AddressLine1:
              type: string
              description: Address Line 1.
            AddressLine2:
              type: string
              description: Address Line 2.
            AddressLine3:
              type: string
              description: Address Line 3.
            City:
              type: string
              description: Name of city
            Province:
              $ref: >-
                #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/ProvinceCodeEnum
            PostalCode:
              type: string
              description: Postal code.
            Country:
              type: string
              description: Country of Residense.
          description: |-
            Customer's address information;
            Province: Province Code.
        CustomerContact:
          xml:
            namespace: ''
            prefix: ''
          type: object
          properties:
            HomePhone:
              type: string
              description: Home phone number.
            CellPhone:
              type: string
              description: Cell phone number.
            WorkPhone:
              type: string
              description: Work phone Number.
            WorkPhoneExt:
              type: string
              description: Work phone extension.
            Email:
              type: string
              description: Email address.
          description: Customer's contact information.
        PoliticalExposure:
          xml:
            namespace: ''
            prefix: ''
          type: object
          properties:
            CurrentExposure:
              type: boolean
              description: Current Exposure.
            EffectiveDate:
              type: string
              format: date
              description: Effective Date from
          description: Customer's Political Exposure information.
        CustIdentInformation:
          xml:
            namespace: ''
            prefix: ''
          type: object
          properties:
            CustomerIdentity:
              type: array
              items:
                $ref: >-
                  #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/CustIdentInfo
          description: |-
            Customer's Identification information.;
            CustomerIdentity: Customer's Identification information list.
        SecurityQuestions:
          xml:
            namespace: ''
            prefix: ''
          type: object
          properties:
            Question:
              type: array
              items:
                $ref: >-
                  #/x-ibm-configuration/targets/AuthWS_V_2_1/definitions/VerificationQuestionDetails
              maxItems: 100
          description: List of all the security questions.
        GenericFeedbackCode:
          xml:
            namespace: ''
            prefix: ''
          type: string
          description: Possible feedback codes.
          enum:
            - IncorrectAnswer
            - UpdateFailed
            - ExceededAttempts
            - GeneralError
            - InvalidAuthenticationToken
            - InvalidSSOToken
            - InvalidForgotPasswordToken
            - NewPasswordInvalid
            - NewPasswordSameAsOldPassword
            - InvalidFutureTransactionId
            - IncorrectAnswerVerification
            - InvalidPayeeCode
            - InvalidPaymentAmount
            - InvalidPaymentDate
            - RecurringPaymentStartDateNotInFuture
            - InvalidPaymentAccount
            - PaymentFailure
            - PaymentFailureAccountOnHold
            - PaymentFailureBalanceOnHold
            - PaymentFailureNSF
            - PayeeAssociationDoesntExist
            - UnableToRetriveFCR
            - UnableToRetriveBRR
            - PaymentDeletionFailure
        ProvinceCodeEnum:
          xml:
            namespace: ''
            prefix: ''
          type: string
          description: Possible province codes.
          enum:
            - AB
            - BC
            - MB
            - NB
            - NL
            - NS
            - NT
            - NU
            - 'ON'
            - PE
            - QC
            - SK
            - YT
            - NONE
        CustIdentInfo:
          xml:
            namespace: ''
            prefix: ''
          type: object
          properties:
            Type:
              type: string
              description: IdentificationType.
            Sequence:
              type: string
              description: Identification Sequence.
            Description:
              type: string
              description: Identification Description.
            Required:
              type: string
              description: Identification Required? Yes/No
            DueDate:
              type: string
              format: date
              description: Identification Due Date.
            ModifiedDate:
              type: string
              format: date
              description: Date of Identification Modify Date.
            Number:
              type: string
              description: Identification Name of the customer
            IssuedBy:
              type: string
              description: Identification Issued by.
            ExpiryDate:
              type: string
              format: date
              description: Identification Expiry.
          description: Customer's identification information
  properties:
    username:
      value: mbcbsmobile
      description: ''
      encoded: false
    password:
      value: LvG46LePtsLeveF
      description: ''
      encoded: false
    authenticateEndPoint:
      value: >-
        https://mbcdev3mobile.manulife.com:10090/Bank_AuthenticationServices/AuthWS_V_2_1
      description: ''
      encoded: false
schemes:
  - https
definitions:
  ValidateVerificationQsnOutput:
    properties:
      ForgotPasswordToken:
        type: string
      Successful:
        type: string
      Message:
        type: string
      Code:
        type: string
    additionalProperties: false
  ValidateVerificationQuestionsBody:
    properties:
      CardNumber:
        type: string
      Answers:
        $ref: '#/definitions/Answers'
    additionalProperties: false
  RegisterSecurityQuestions_Input:
    properties:
      CardNumber:
        type: string
      Answer:
        $ref: '#/definitions/AnswerArray'
    additionalProperties: false
  Answers:
    properties:
      Answer:
        $ref: '#/definitions/AnswerArray'
    additionalProperties: false
    required:
      - Answer
  AnswerArray:
    type: array
    items:
      $ref: '#/definitions/Answer'
  Answer:
    properties:
      QuestionID:
        type: string
      Answer:
        type: string
    additionalProperties: false
    required:
      - QuestionID
      - Answer
  QuestionArray:
    type: array
    items:
      $ref: '#/definitions/Question'
  Question:
    properties:
      QuestionID:
        type: string
      QuestionText:
        type: string
    additionalProperties: false
  Questions:
    properties:
      Question:
        $ref: '#/definitions/QuestionArray'
    additionalProperties: false
  GetPasswordResetQuestionsBody:
    properties:
      CardNumber:
        type: string
      SINSuffix:
        type: string
      DateOfBirth:
        type: string
    additionalProperties: false
    required:
      - CardNumber
      - SINSuffix
      - DateOfBirth
  GetPasswordResetQuestionsResponse:
    properties:
      Code:
        type: string
      Message:
        type: string
      ForgotPasswordToken:
        type: string
      Questions:
        $ref: '#/definitions/Questions'
    additionalProperties: false
  GetSecurityQuestions_Output:
    properties:
      Code:
        type: string
      Message:
        type: string
      Questions:
        $ref: '#/definitions/Questions'
    additionalProperties: false
  ResetPassword_Output:
    properties:
      Code:
        type: string
      Message:
        type: string
      Successful:
        type: boolean
    additionalProperties: false
    required:
      - Successful
  RegisterSecurityQuestions_Output:
    properties:
      Code:
        type: string
      Message:
        type: string
      Successful:
        type: boolean
    additionalProperties: false
    required:
      - Successful
  ResetPassword_Input:
    properties:
      CardNumber:
        type: string
      NewPassword:
        type: string
    additionalProperties: false
    required:
      - CardNumber
      - NewPassword
  ChangePassword_Output:
    properties:
      Code:
        type: string
      Message:
        type: string
      Successful:
        type: string
    additionalProperties: false
  ChangePassword_Input:
    properties:
      Password:
        type: string
      NewPassword:
        type: string
    additionalProperties: false
  Error:
    properties:
      Message:
        type: string
      Code:
        type: string
      Status:
        type: string
      FaultCode:
        type: string
      FaultString:
        type: string
    additionalProperties: false
  Credentials:
    properties:
      Username:
        type: string
        description: Card Number
      Password:
        type: string
        description: Password
    additionalProperties: false
    description: Card Number & password
    required:
      - Username
      - Password
  CustomerDetails:
    properties:
      FirstName:
        type: string
      LastName:
        type: string
      DoB:
        type: string
    additionalProperties: false
    required:
      - LastName
  SecurityQuestion:
    properties:
      QuestionID:
        type: integer
        format: int32
      QuestionText:
        type: string
    additionalProperties: false
    required:
      - QuestionID
      - QuestionText
  Authenticate_Output:
    properties:
      Code:
        type: string
      AuthorizationToken:
        type: string
      QueryResponseAuthorizationToken:
        type: string
      ChangePassword:
        type: boolean
      SecureAction:
        type: string
      Registered:
        type: boolean
      SecurityQuestion:
        $ref: '#/definitions/SecurityQuestion'
      CustomerDetails:
        $ref: '#/definitions/CustomerDetails'
      PreferredLanguage:
        type: string
      ApplicationStatus:
        type: string
    additionalProperties: false
    required:
      - PreferredLanguage
      - ApplicationStatus
  PVQ:
    properties:
      AnswerID:
        type: string
        description: Question ID that was returned in the Authentication response
      AnswerText:
        type: string
        description: Answer input by the customer on the Meed Application
    additionalProperties: false
    description: Personal verification questions required
  Authenticate_Input:
    properties:
      BankSSOToken:
        type: string
        description: Single Sign On Token
      Credentials:
        $ref: '#/definitions/Credentials'
      PVQ:
        $ref: '#/definitions/PVQ'
    description: End-user input credentials with which to authenticate against the bank.
    required:
      - Credentials
produces:
  - application/xml
  - application/json
consumes:
  - application/json
parameters:
  MLI-Application:
    name: MLI-Application
    type: string
    required: true
    in: header
  MLI-OriginatingIP:
    name: MLI-OriginatingIP
    type: string
    required: true
    in: header
  MLI-ApplicationVersion:
    name: MLI-ApplicationVersion
    type: string
    required: false
    in: header
  MLI-DeviceID:
    name: MLI-DeviceID
    type: string
    required: false
    in: header
  MLI-DeviceType:
    name: MLI-DeviceType
    type: string
    required: false
    in: header
  MLI-Carrier:
    name: MLI-Carrier
    type: string
    required: false
    in: header
  MLI-GeoLocationLat:
    name: MLI-GeoLocationLat
    type: number
    required: false
    in: header
    format: double
  MLI-GeoLocationLong:
    name: MLI-GeoLocationLong
    type: number
    required: false
    in: header
    format: double
  Accept-Language:
    name: Accept-Language
    type: string
    required: true
    in: header
  MLI-SessionToken:
    name: MLI-SessionToken
    type: string
    required: false
    in: header
    description: optional?
  MLI-TransactionToken:
    name: MLI-TransactionToken
    type: string
    required: false
    in: header
    description: optional?
  QueryResponseAuthorization:
    name: QueryResponseAuthorization
    type: string
    required: false
    in: header
    description: Bearer
  ForgotPasswordToken:
    name: ForgotPasswordToken
    type: string
    required: false
    in: header
    description: ForgotPasswordToken
  Authorization:
    name: Authorization
    type: string
    required: false
    in: header
    description: Bearer
  Accept:
    name: Accept
    type: string
    required: false
    in: query
tags:
  - name: O-Authentication
  - name: BU-Bank
